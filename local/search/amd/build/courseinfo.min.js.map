{"version":3,"file":"courseinfo.min.js","sources":["../src/courseinfo.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     local_costcenter/costcenter\n * @class      NewCostcenter\n * @package    local_costcenter\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/fragment', 'core/ajax', 'core/yui'],\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y) {\n\n    return {\n        \n        // Public variables and functions.\n        /**\n         * Attach event listeners to initialise this module.\n         *\n         * @method init\n         * @param {string} selector The CSS selector used to find nodes that will trigger this module.\n         * @param {int} contextid The contextid for the course.\n         */\n        init: function(args) {\n            // console.log(args);\n            var request = $.ajax({\n                    url:  M.cfg.wwwroot + \"/local/search/courseinfo.php\",\n                    method: \"POST\",\n                    data: { id : args.courseid },\n                    dataType: \"html\"\n                });\n                 \n                request.done(function( returndata ) {\n                    // alert(msg);\n                    // $( \"#page-content\" ).html( returndata );\n                    ModalFactory.create({\n                            title: Str.get_string('courseinfo', 'local_search'),\n                            body: returndata\n                        }).done(function(modal) {\n                        // Do what you want with your new modal.\n                        modal.show();\n                        modal.setLarge();\n                        modal.getRoot().addClass('openLMStransition catalog_popup');\n                        modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                        modal.getRoot().on(ModalEvents.hidden, function() {\n                        modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                            setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                        }.bind(this));\n                    });\n            });\n\n        },\n       test: function(args){\n\n         $.ajax({\n             type: \"GET\",\n             url : M.cfg.wwwroot + \"/local/search/udemyajax.php?action=udemyuserlicense\",\n             success: function(response) {\n             console.log(response);\n             return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'course_self_enrol',\n                component: 'local_search',\n                param :args\n            },\n            {\n                key: 'course_self_enrol_license',\n                component: 'local_search',\n                param: args\n            },\n            {\n                key: 'confirm'\n            }]).then(function(s) {\n             \n               if(response == true){ \n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                 }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                         $.ajax({\n                            type: \"GET\",\n                            url:  M.cfg.wwwroot + \"/local/search/courseinfo.php?id=\"+args.courseid+\"&enrol=\"+args.enroll+\"\",\n\n                            success: function(returndata) {\n                                // console.log(returndata);\n                                modal.hide();\n                                // $(\".enrolled\"+args.courseid+\"\").html(returndata);\n                                window.location.href = M.cfg.wwwroot + \"/course/view.php?id=\"+args.courseid;\n                            }\n                        });\n                  }.bind(this));\n                    modal.show();\n                }.bind(this));\n              }\n              else if(response == false){\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.CANCEL,\n                    body: s[2]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.show();\n                }.bind(this));\n              }\n            }.bind(this));\n        }\n    });\n    },\n    coursetest: function(args){\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'course_self_enrol',\n                component: 'local_search',\n                param :args\n            },\n            {\n                key: 'confirm'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[2]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        $.ajax({\n                            type: \"GET\",\n                            url:  M.cfg.wwwroot + \"/local/search/courseinfo.php?id=\"+args.courseid+\"&enrol=\"+args.enroll+\"\",\n                            success: function(returndata) {\n                                // console.log(returndata);\n                                modal.hide();\n                                // $(\".enrolled\"+args.courseid+\"\").html(returndata);\n                                window.location.href = M.cfg.wwwroot + \"/course/view.php?id=\"+args.courseid;\n                            }\n                        });\n                        \n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n   classroominfo: function(args) {\n            // console.log(args);\n\n            var request = $.ajax({\n                    url:  M.cfg.wwwroot + \"/local/search/classrrominfo.php\",\n                    method: \"POST\",\n                    data: { crid : args.crid },\n                    dataType: \"html\"\n                });\n                 \n                request.done(function( returndata ) {\n                    // alert(msg);\n                    // $( \"#page-content\" ).html( returndata );\n                    ModalFactory.create({\n                            title: Str.get_string('classroom_info', 'local_classroom'),\n                            body: returndata\n                        }).done(function(modal) {\n                        // Do what you want with your new modal.\n                        modal.show();\n                        modal.setLarge();\n                        modal.getRoot().addClass('openLMStransition catalog_popup');\n                        modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                        modal.getRoot().on(ModalEvents.hidden, function() {\n                        modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                            setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                        }.bind(this));\n                    });\n            });\n\n        },\n        programinfo: function(args) {\n            // console.log(args);\n\n            var request = $.ajax({\n                    url:  M.cfg.wwwroot + \"/local/search/classrrominfo.php?programid=\"+args.programid+\"\",\n                    method: \"POST\",\n                    data: { programid : args.programid },\n                    dataType: \"html\"\n                });\n                 \n                request.done(function( returndata ) {\n                    // alert(msg);\n                    // $( \"#page-content\" ).html( returndata );\n                    ModalFactory.create({\n                            title: Str.get_string('program_info', 'local_program'),\n                            body: returndata\n                        }).done(function(modal) {\n                        // Do what you want with your new modal.\n                        modal.show();\n                        modal.setLarge();\n                        modal.getRoot().addClass('openLMStransition catalog_popup');\n                        modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                        modal.getRoot().on(ModalEvents.hidden, function() {\n                        modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                            setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                        }.bind(this));\n                    });\n            });\n            \n        },\n         certificationinfo: function(args) {\n            // console.log(args);\n\n            var request = $.ajax({\n                    url:  M.cfg.wwwroot + \"/local/search/classrrominfo.php\",\n                    method: \"POST\",\n                    data: { certificationid : args.certificationid },\n                    dataType: \"html\"\n                });\n                 \n                request.done(function( returndata ) {\n                    // alert(msg);\n                    // $( \"#page-content\" ).html( returndata );\n                    ModalFactory.create({\n                            title: Str.get_string('certification_info', 'local_certification'),\n                            body: returndata\n                        }).done(function(modal) {\n                        // Do what you want with your new modal.\n                        modal.show();\n                        modal.setLarge();\n                        modal.getRoot().addClass('openLMStransition catalog_popup');\n                        modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                        modal.getRoot().on(ModalEvents.hidden, function() {\n                        modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                            setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                        }.bind(this));\n                    });\n            });\n\n        },\n        learningplaninfo: function(args) {\n            // console.log(args);\n            \n            var request = $.ajax({\n                    url:  M.cfg.wwwroot + \"/local/search/classrrominfo.php\",\n                    method: \"POST\",\n                    data: { learningplanid : args.learningplanid },\n                    dataType: \"html\"\n                });\n                 \n                request.done(function( returndata ) {\n                    // alert(msg);\n                    // $( \"#page-content\" ).html( returndata );\n                    ModalFactory.create({\n                            title: Str.get_string('learningplan_info', 'local_search'),\n                            body: returndata\n                        }).done(function(modal) {\n                        // Do what you want with your new modal.\n                        modal.show();\n                        modal.setLarge();\n                        modal.getRoot().addClass('openLMStransition catalog_popup');\n                        modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                        modal.getRoot().on(ModalEvents.hidden, function() {\n                        modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                            setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                        }.bind(this));\n                    });\n            });\n\n        },\n        courseexpiry: function(args){\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'course_expiry_user',\n                component: 'local_search',\n                param :args\n            },\n            {\n                key: 'confirm'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.CANCEL,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                     modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n       \n        load: function () {\n            // return '';\n        },\n        copy_url: function(args){\n            const el = document.createElement('textarea');\n            el.value = M.cfg.wwwroot+'/local/costcenter/coursedetailsview.php?module='+args.module+'&moduleid='+args.moduleid;\n            document.body.appendChild(el);\n            el.select();\n            document.execCommand('copy');\n            document.body.removeChild(el);\n        }\n    };\n});\n"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","init","args","ajax","url","M","cfg","wwwroot","method","data","id","courseid","dataType","done","returndata","create","title","get_string","body","modal","show","setLarge","getRoot","addClass","animate","on","hidden","setTimeout","destroy","bind","this","test","type","success","response","console","log","get_strings","key","component","param","then","s","types","SAVE_CANCEL","setSaveButtonText","save","e","preventDefault","enroll","hide","window","location","href","CANCEL","coursetest","classroominfo","crid","programinfo","programid","certificationinfo","certificationid","learningplaninfo","learningplanid","courseexpiry","load","copy_url","el","document","createElement","value","module","moduleid","appendChild","select","execCommand","removeChild"],"mappings":"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"}