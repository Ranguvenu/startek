define("local_challenge/form-options-selector",["jquery","core/ajax","core/templates","core/str"],(function($,Ajax,Templates,Str){return{processResults:function(selector,results){var options=[];return $.isArray(results)?($.each(results,(function(index,option){options.push({value:option.id,label:option._label})})),options):results},transport:function(selector,query,success,failure){contextid=parseInt($(selector).data("contextid"),10),action=$(selector).data("action"),formoptions=$(selector).data("options"),Str.get_strings([{key:"selectusers",component:"local_challenge"}]).then((function(s){s[0]})),formoptions=JSON.stringify(formoptions),Ajax.call([{methodname:"local_challenge_form_option_selector",args:{query:query,context:{contextid:contextid},action:action,options:formoptions,searchanywhere:!0,page:0,perpage:101}}])[0].then((function(results){results=$.parseJSON(results);var promises=[],i=0;return"local_challenge/form-option-selector-suggestion",results.length<=100?($.each(results,(function(index,option){var ctx=option;ctx.hasidentity=!0,ctx.identity=[].join(", "),promises.push(Templates.render("local_challenge/form-option-selector-suggestion",ctx))})),$.when.apply($.when,promises).then((function(){var args=arguments;$.each(results,(function(index,option){option._label=args[i],i++})),success(results)}))):Str.get_string("toomanyoptionstoshow","local_costcenter",">100").then((function(toomanyoptionstoshow){success(toomanyoptionstoshow)}))})).fail(failure)}}}));

//# sourceMappingURL=form-options-selector.min.js.map