{"version":3,"file":"ajaxforms.min.js","sources":["../src/ajaxforms.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     core_group/AjaxForms\n * @class      AjaxForms\n * @package    core_group\n * @copyright  2017 Damyon Wiese <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/str',\n        'core/modal_factory',\n        'core/modal_events',\n        'core/fragment',\n        'core/ajax',\n        'core/yui',\n        'core/templates',\n        'local_classroom/select2',\n        'local_classroom/classroom'],\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y, Templates, select2, Classroom) {\n\n    /**\n     * Constructor\n     *\n     * @param {String} selector used to find triggers for the new group modal.\n     * @param {int} contextid\n     *\n     * Each call to init gets it's own instance of this class.\n     */\n    classroomlastchildpopup=function(args) {\n            params = {classroomid : args.id, contextid : 1};\n\n            var promise = Ajax.call([{\n              methodname: 'local_classroom_classroomlastchildpopup',\n              args: params\n            }]);\n\n            promise[0].done(function(returndata) {\n              var data = Templates.render('local_classroom/classroomview', {response: returndata});\n                data.then(function(response){\n                    ModalFactory.create({\n                        title: Str.get_string('classroom_info', 'local_classroom'),\n                        body: response\n                      }).done(function(modal) {\n                        // Do what you want with your new modal.\n                        modal.show();\n                         modal.setLarge();\n                         modal.getRoot().addClass('openLMStransition');\n                            modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                            modal.getRoot().on(ModalEvents.hidden, function() {\n                            modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                                    setTimeout(function(){\n                                    modal.destroy();\n                                }, 1000);\n                            }.bind(this));\n                            $(\".close\").click(function(){\n                                window.location.href =  window.location.href;\n                            });\n                      });\n                });\n                \n            }).fail(function(ex) {\n                // do something with the exception\n                console.log(ex);\n            });\n    };\n    var AjaxForms = function(args) {\n        this.contextid = args.contextid;\n        this.args = args;\n        this.init(args);\n    };\n\n    /**\n     * @var {Modal} modal\n     * @private\n     */\n    AjaxForms.prototype.modal = null;\n\n    /**\n     * @var {int} contextid\n     * @private\n     */\n    AjaxForms.prototype.contextid = -1;\n\n    /**\n     * Initialise the class.\n     *\n     * @param {String} selector used to find triggers for the new group modal.\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.init = function(args) {\n        // Fetch the title string.\n        var self = this;\n        switch (args.callback) {\n          case 'classroom_form':\n              switch (args.id) {\n                case 0:\n                  var head =  {key:'createclassroom', component:'local_classroom'};\n                  break;\n                default:\n                  var head =  {key:'updateclassroom', component:'local_classroom'};\n              }\n              break;\n          case 'session_form':\n            switch (args.id) {\n              case 0:\n                var head =  {key:'addsession', component:'local_classroom'};\n                break;\n              default:\n                var head =  {key:'updatesession', component:'local_classroom'};\n            }\n          break;\n          case 'course_form':\n            switch (args.id) {\n              case 0:\n                var head =  {key:'addcourses', component:'local_classroom'};\n                break;\n              default:\n                var head =  {key:'updatecourses', component:'local_classroom'};\n            }\n            break;\n          case 'classroom_completion_form':\n            var head =  {key:'classroom_completion_settings', component:'local_classroom'};\n            break;\n        }\n        customstrings = Str.get_strings([head,{\n                        key: 'savecontinue',\n                        component: 'local_classroom'\n                    },\n                    {\n                        key: 'assign',\n                        component: 'local_classroom'\n                    },\n                    {\n                        key: 'save',\n                        component: 'local_classroom'\n                    },\n                    {\n                        key: 'previous',\n                        component: 'local_classroom'\n                    },\n                    {\n                        key: 'skip',\n                        component: 'local_classroom'\n                    },\n                    {\n                        key: 'cancel',\n                        component: 'local_classroom'\n                    }]);\n\n        return customstrings.then(function(strings) {\n            // Create the modal.\n            return ModalFactory.create({\n                type: ModalFactory.types.DEFAULT,\n                title: strings[0],\n                body: this.getBody(),\n                footer: this.getFooter(strings),\n            });\n        }.bind(this)).then(function(modal) {\n            // Keep a reference to the modal.\n            this.modal = modal;\n\n            // Forms are big, we want a big modal.\n            this.modal.setLarge();\n\n            this.modal.getRoot().addClass('openLMStransition local_classroom');\n\n            // We want to reset the form every time it is opened.\n            this.modal.getRoot().on(ModalEvents.hidden, function() {\n                this.modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                setTimeout(function(){\n                    modal.destroy();\n                }, 1000);\n                // this.modal.destroy();\n            }.bind(this));\n            this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\n            this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                window.location.href =  window.location.href;\n                //modal.hide();\n                //setTimeout(function(){\n                //    modal.destroy();\n                //}, 1000);\n                // modal.destroy();\n            });\n            this.modal.getFooter().find('[data-action=\"skip\"]').on('click', function() {\n                self.args.form_status = self.args.form_status + 1;\n                 //console.log(args.form_status);\n                 // OL-1042 Add Target Audience to Classrooms//\n                 // if (args.form_status == 4) {\n                // OL-1042 Add Target Audience to Classrooms//\n                    // classroomlastchildpopup(args);\n                 // }\n                var data = self.getBody();\n                data.then(function(html, js) {\n                    if (html === false) {\n                        // window.location.reload();\n                        self.handleFormSubmissionResponse(args);\n                        \n                    }\n                });\n                modal.setBody(data);\n                if(self.args.form_status == 3){\n                    $('[data-action=\"skip\"]').css('display', 'none');\n                }\n            });\n            this.modal.getFooter().find('[data-action=\"previous\"]').on('click', function() {\n                self.args.form_status = self.args.form_status - 1;\n                 //console.log(args.form_status);\n                 // OL-1042 Add Target Audience to Classrooms//\n                 // if (args.form_status == 4) {\n                // OL-1042 Add Target Audience to Classrooms//\n                    // classroomlastchildpopup(args);\n                 // }\n                var data = self.getBody();\n                data.then(function(html, js) {\n                    if (html === false) {\n                        // window.location.reload();\n                        self.handleFormSubmissionResponse(args);\n                        \n                    }\n                });\n                modal.setBody(data);\n                if (self.args.form_status == 0) {\n                    $('[data-action=\"skip\"]').css('display', 'none');\n                    $('[data-action=\"previous\"]').css('display', 'none');\n                }else if(self.args.form_status < 3){\n                    $('[data-action=\"skip\"]').css('display', 'inline-block');\n                    $('[data-action=\"previous\"]').css('display', 'inline-block');\n                }\n            });\n            // added for custom navigating from the top lists.\n            \n            if(self.args.callback == 'classroom_form'){\n                // if(instanceid > 0){\n                $(document).on('click', '.custom_classroom_form_redirect', function(){\n                    var instanceid = $(\"#classroomid\").val();\n                    if(instanceid > 0){\n                        self.args.form_status = $(this).data('value');\n                        var data = self.getBody();\n                        data.then(function(html, js) {\n                            if (html === false) {\n                              // window.location.reload();\n                                self.handleFormSubmissionResponse(args);\n                            }\n                        });\n                        modal.setBody(data);\n                        if (self.args.form_status == 0) {\n                            $('[data-action=\"skip\"]').css('display', 'none');\n                            $('[data-action=\"previous\"]').css('display', 'none');\n                        }else if(self.args.form_status < 4){\n                            $('[data-action=\"skip\"]').css('display', 'inline-block');\n                            $('[data-action=\"previous\"]').css('display', 'inline-block');\n                        }\n                    }\n                });\n            }\n            // added for custom navigating from the top lists ends here.\n            this.modal.getRoot().on('submit', 'form', function(form) {\n                self.submitFormAjax(form, self.args);\n            });\n            this.modal.show();\n            this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\n            $(\".close\").click(function(){\n              window.location.href =  window.location.href;\n            });\n            return this.modal;\n        }.bind(this));\n    };\n\n    /**\n     * @method getBody\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.getBody = function(formdata) {\n        if (typeof formdata === \"undefined\") {\n            formdata = {};\n        }\n\n        // Get the content of the modal.\n        this.args.jsonformdata = JSON.stringify(formdata);\n        return Fragment.loadFragment(this.args.component, this.args.callback, this.contextid, this.args);\n    };\n    /**\n     * @method getFooter\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.getFooter = function(customstrings) {\n\n            var footer = '';\n\n            var style = 'style=\"display:none;\"';\n\n            if(this.args.callback == 'classroom_form'){\n              footer += '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+customstrings[1]+'</button>&nbsp;';\n            }else if(this.args.callback == 'course_form'){\n              footer += '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+customstrings[2]+'</button>&nbsp;';\n            }else{\n             footer += '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+customstrings[3]+'</button>&nbsp;';\n            }\n        \n            if (this.args.form_status == 0) {\n                \n                footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"previous\" ' + style + '>'+customstrings[4]+'</button>&nbsp;';\n                footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"skip\" ' + style + '>'+customstrings[5]+'</button>&nbsp;';\n            }\n            footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+customstrings[6]+'</button>';\n          return footer;\n                  \n    };\n    /**\n     * @method handleFormSubmissionResponse\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.handleFormSubmissionResponse = function(args) {\n        this.modal.hide();\n        // We could trigger an event instead.\n        // Yuk.\n        Y.use('moodle-core-formchangechecker', function() {\n            M.core_formchangechecker.reset_form_dirty_state();\n        });\n        if (args.form_status == -2 || args.form_status == 3 || args.callback == 'course_form') {\n            window.location.reload();\n        }\n        classroomlastchildpopup(args);\n    };\n\n    /**\n     * @method handleFormSubmissionFailure\n     * @private\n     * @return {Promise}\n     */\n    AjaxForms.prototype.handleFormSubmissionFailure = function(data) {\n        // Oh noes! Epic fail :(\n        // Ah wait - this is normal. We need to re-display the form with errors!\n        this.modal.setBody(this.getBody(data));\n    };\n\n    /**\n     * Private method\n     *\n     * @method submitFormAjax\n     * @private\n     * @param {Event} e Form submission event.\n     */\n    AjaxForms.prototype.submitFormAjax = function(e, args) {\n        // We don't want to do a real form submission.\n        e.preventDefault();\n        var self = this;\n        // Convert all the form elements values to a serialised string.\n        var formData = this.modal.getRoot().find('form').serialize();\n        var methodname = args.plugintype + '_' + args.pluginname + '_submit_instance';\n        // Now we can continue...\n        var params = {};\n        params.contextid = this.contextid;\n        params.jsonformdata = JSON.stringify(formData);\n        params.form_status = args.form_status;\n\n        var promise = Ajax.call([{\n            methodname: methodname,\n            args: params\n        }]);\n        promise[0].done(function(resp){\n            self.args.form_status = resp.form_status;\n            if (resp.form_status >= 0 && resp.form_status !== false) {\n                self.args.form_status = resp.form_status;\n                self.args.id = resp.id;\n                self.handleFormSubmissionFailure();\n            } else {\n                self.handleFormSubmissionResponse(self.args);\n                window.location.reload();\n            }\n            if (args.form_status > 0) {\n                $('[data-action=\"skip\"]').css('display', 'inline-block');\n                $('[data-action=\"previous\"]').css('display', 'inline-block');\n            }\n            if (args.form_status == 3 ) {\n                $('[data-action=\"skip\"]').css('display', 'none');\n            }\n            \n        }).fail(function(ex){\n            self.handleFormSubmissionFailure(formData);\n        });\n\n    };\n\n    /**\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\n     *\n     * @method submitForm\n     * @param {Event} e Form submission event.\n     * @private\n     */\n    AjaxForms.prototype.submitForm = function(e) {\n        e.preventDefault();\n        this.modal.getRoot().find('form').submit();\n    };\n\n    return /** @alias module:core_group/AjaxForms */ {\n        // Public variables and functions.\n        /**\n         * Attach event listeners to initialise this module.\n         *\n         * @method init\n         * @param {string} selector The CSS selector used to find nodes that will trigger this module.\n         * @param {int} contextid The contextid for the course.\n         * @return {Promise}\n         */\n        init: function(args) {\n            return new AjaxForms(args);\n        },\n        load: function () {\n            $(document).on('click', '#fitem_id_department .form-autocomplete-selection .badge.badge-info, #fitem_id_department .form-autocomplete-suggestions [role=\"option\"]', function(){\n                $('#fitem_id_subdepartment .form-autocomplete-selection .badge.badge-info').trigger('click');\n            });\n        }\n    };\n});"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","Templates","select2","Classroom","classroomlastchildpopup","args","params","classroomid","id","contextid","call","methodname","done","returndata","render","response","then","create","title","get_string","body","modal","show","setLarge","getRoot","addClass","animate","on","hidden","setTimeout","destroy","bind","this","click","window","location","href","fail","ex","console","log","AjaxForms","init","prototype","self","callback","head","key","component","customstrings","get_strings","strings","type","types","DEFAULT","getBody","footer","getFooter","find","submitForm","form_status","data","html","js","handleFormSubmissionResponse","setBody","css","document","val","form","submitFormAjax","formdata","jsonformdata","JSON","stringify","loadFragment","style","hide","use","M","core_formchangechecker","reset_form_dirty_state","reload","handleFormSubmissionFailure","e","preventDefault","formData","serialize","plugintype","pluginname","resp","submit","load","trigger"],"mappings":"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"}