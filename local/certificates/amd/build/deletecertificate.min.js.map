{"version":3,"file":"deletecertificate.min.js","sources":["../src/deletecertificate.js"],"sourcesContent":["/**\n *\n * @package    local_certificates\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/ajax'],\n        function($, Str, ModalFactory, ModalEvents, Ajax) {\n \n    /**\n     * Constructor\n     *\n     * @param {String} selector used to find triggers for the new group modal.\n     * @param {int} contextid\n     *\n     * Each call to init gets it's own instance of this class.\n     */ \n    return {\n        init: function(args) {\n        },\n        deleteConfirm: function(args) {            \n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'deleteconfirm_cert',\n                component: 'local_certificates',\n                param :args.fullname\n            },\n            {\n                key: 'delete'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+M.util.get_string(\"yes\", \"moodle\")+'</button>&nbsp;' +\n            '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"no\", \"moodle\")+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        // window.location.href ='index.php?delete='+elem+'&confirm=1&sesskey=' + M.cfg.sesskey;\n                        var deleteparams = {};\n                        deleteparams.certificateid = args.id;\n                        var promise = Ajax.call([{\n                            methodname: 'local_certificates_'+args.action,\n                            args: deleteparams\n                        }]);\n                        promise[0].done(function(resp) {\n                            window.location.href = window.location.href;\n                        }).fail(function(ex) {\n                            // do something with the exception\n                             console.log(ex);\n                        });\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                /*}).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.certificateid = args.id;\n                        var promise = Ajax.call([{\n                            methodname: 'local_certificates_'+args.action,\n                            args: params\n                        }]);\n                        promise[0].done(function(resp) {\n                            window.location.href = window.location.href;\n                        }).fail(function(ex) {\n                            // do something with the exception\n                             console.log(ex);\n                        });\n                    }.bind(this));*/\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        }\n    };\n});"],"names":["define","$","Str","ModalFactory","ModalEvents","Ajax","init","args","deleteConfirm","get_strings","key","component","param","fullname","then","s","create","title","type","types","DEFAULT","body","footer","M","util","get_string","done","modal","getRoot","find","on","deleteparams","certificateid","id","call","methodname","action","resp","window","location","href","fail","ex","console","log","bind","this","getFooter","setBody","hide","show"],"mappings":";;;;;AAKAA,8CAAO,CAAC,SAAU,WAAY,qBAAsB,oBAAqB,cACjE,SAASC,EAAGC,IAAKC,aAAcC,YAAaC,YAUzC,CACHC,KAAM,SAASC,QAEfC,cAAe,SAASD,aACbL,IAAIO,YAAY,CAAC,CACpBC,IAAK,WAET,CACIA,IAAK,qBACLC,UAAW,qBACXC,MAAOL,KAAKM,UAEhB,CACIH,IAAK,YACLI,KAAK,SAASC,GACdZ,aAAaa,OAAO,CAChBC,MAAOF,EAAE,GACTG,KAAMf,aAAagB,MAAMC,QACzBC,KAAMN,EAAE,GACRO,OAAQ,oEAAoEC,EAAEC,KAAKC,WAAW,MAAO,UAA7F,uFACwDF,EAAEC,KAAKC,WAAW,KAAM,UAAU,cACnGC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,UAAUC,KAAK,wBAAwBC,GAAG,QAAS,eAEjDC,aAAe,GACnBA,aAAaC,cAAgBzB,KAAK0B,GACpB5B,KAAK6B,KAAK,CAAC,CACrBC,WAAY,sBAAsB5B,KAAK6B,OACvC7B,KAAMwB,gBAEF,GAAGL,MAAK,SAASW,MACrBC,OAAOC,SAASC,KAAOF,OAAOC,SAASC,QACxCC,MAAK,SAASC,IAEZC,QAAQC,IAAIF,QAEnBG,KAAKC,OACPnB,MAAMoB,YAAYlB,KAAK,0BAA0BC,GAAG,SAAS,WACzDH,MAAMqB,QAAQ,IACdrB,MAAMsB,UAqBVtB,MAAMuB,QACRL,KAAKC,QACTD,KAAKC"}