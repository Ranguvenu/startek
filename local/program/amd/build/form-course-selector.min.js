/**
 * course selector module.
 *
 * @module     tool_lp/form-course-selector
 * @class      form-course-selector
 * @package    tool_lp
 * @copyright  2015 Frédéric Massart - FMCorz.net
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_program/form-course-selector",["jquery","core/ajax","core/templates"],(function($,Ajax,Templates){return{processResults:function(selector,results){var courses=[];return $.each(results,(function(index,course){courses.push({value:course.id,label:course._label})})),courses},transport:function(selector,query,success,failure){contextid=parseInt($(selector).data("contextid"),10),includes=$(selector).data("includes"),programid=$(selector).data("programid"),levelid=$(selector).data("levelid"),classroomcourses=$("[name='map_classroom_"+programid+"_"+levelid+"']:checked").val(),Ajax.call([{methodname:"local_program_form_course_selector",args:{query:query,context:{contextid:contextid},includes:includes,programid:programid,levelid:levelid,classroomcourses:classroomcourses}}])[0].then((function(results){var promises=[],i=0;return $.each(results.courses,(function(index,course){promises.push(Templates.render("local_program/form-course-selector-suggestion",course))})),$.when.apply($.when,promises).then((function(){var args=arguments;$.each(results.courses,(function(index,course){course._label=args[i],i++})),success(results.courses)}))})).catch(failure)}}}));

//# sourceMappingURL=form-course-selector.min.js.map