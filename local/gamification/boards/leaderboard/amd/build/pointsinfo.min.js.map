{"version":3,"sources":["../src/pointsinfo.js"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","pointsInfo","args","self","info","prototype","get_string","then","title","create","type","types","DEFAULT","body","getBody","footer","getFooter","bind","modal","show","getRoot","on","hidden","destroy","find","hide","setTimeout","loadFragment","context","$footer","M","util","load"],"mappings":"AAQAA,OAAM,iCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,oBAAvB,CAA6C,mBAA7C,CAAkE,eAAlE,CAAmF,WAAnF,CAAgG,UAAhG,CAAD,CACE,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAA+BC,CAA/B,CAA4CC,CAA5C,CAA+D,CACtE,GAAIC,CAAAA,CAAU,CAAG,QAAbA,CAAAA,UAAa,CAASC,CAAT,CAAc,CAE9B,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACA,KAAKD,IAAL,CAAYA,CAAZ,CACAC,CAAI,CAACC,IAAL,CAAUF,CAAV,CACA,CALD,CAMAD,CAAU,CAACI,SAAX,CAAqBD,IAArB,CAA4B,SAASF,CAAT,CAAc,CAE9B,IAF8B,CAGzC,MAAQL,CAAAA,CAAG,CAACS,UAAJ,CAAe,UAAf,CAA2B,oBAA3B,EAAiDC,IAAjD,CAAsD,SAASC,CAAT,CAAgB,CAC7E,MAAOV,CAAAA,CAAY,CAACW,MAAb,CAAoB,CACdC,IAAI,CAAEZ,CAAY,CAACa,KAAb,CAAmBC,OADX,CAEdJ,KAAK,CAAEA,CAFO,CAGdK,IAAI,CAAE,KAAKC,OAAL,CAAaZ,CAAb,CAHQ,CAIda,MAAM,CAAE,KAAKC,SAAL,EAJM,CAApB,CAMP,CAP6D,CAO5DC,IAP4D,CAOvD,IAPuD,CAAtD,EAOMV,IAPN,CAOW,SAASW,CAAT,CAAgB,CAClC,KAAKA,KAAL,CAAaA,CAAb,CACA,KAAKA,KAAL,CAAWC,IAAX,GACA,KAAKD,KAAL,CAAWE,OAAX,GAAqBC,EAArB,CAAwBtB,CAAW,CAACuB,MAApC,CAA4C,UAAW,CACtDJ,CAAK,CAACK,OAAN,EACA,CAF2C,CAE1CN,IAF0C,CAErC,IAFqC,CAA5C,EAGA,KAAKC,KAAL,CAAWF,SAAX,GAAuBQ,IAAvB,CAA4B,0BAA5B,EAAsDH,EAAtD,CAAyD,OAAzD,CAAkE,UAAW,CAChEH,CAAK,CAACO,IAAN,GACAC,UAAU,CAAC,UAAU,CACjBR,CAAK,CAACK,OAAN,EACH,CAFS,CAEP,GAFO,CAGb,CALwD,CAKvDN,IALuD,CAKlD,IALkD,CAAlE,CAMA,CAnBO,CAoBR,CAvBD,CAyBAhB,CAAU,CAACI,SAAX,CAAqBS,OAArB,CAA+B,UAAc,CAQ5C,MAAOd,CAAAA,CAAQ,CAAC2B,YAAT,CAAsB,oBAAtB,CAA4C,aAA5C,CAA2D,KAAKzB,IAAL,CAAU0B,OAArE,CAA8E,KAAK1B,IAAnF,CACP,CATD,CAWAD,CAAU,CAACI,SAAX,CAAqBW,SAArB,CAAiC,UAAW,CAErCa,OAAO,CAAG,8EAAwEC,CAAC,CAACC,IAAF,CAAOzB,UAAP,CAAkB,QAAlB,CAA4B,QAA5B,CAAxE,CAA8G,WAAxH,CACA,MAAOuB,CAAAA,OACV,CAJJ,CAOA,MAAiD,CAU1CG,IAAI,CAAE,eAAU,CAEf,CAZyC,CAahD/B,UAAU,CAAE,oBAASC,CAAT,CAAc,CAEzB,MAAO,IAAID,CAAAA,CAAJ,CAAeC,CAAf,CAEP,CAjB+C,CAmBjD,CAtEK,CAAN","sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     gamificationboards_leaderboard/pointsinfo\n * @class      pointsinfo\n * @package    local_users\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/fragment', 'core/ajax', 'core/yui'],\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y) {\n\tvar pointsInfo = function(args){\n\t\t// alert(1);\n\t\tvar self = this;\n\t\tthis.args = args;\n\t\tself.info(args);\n\t};\n\tpointsInfo.prototype.info = function(args){\n\t\t// alert(2);\n\t\tvar self = this;\n\t\treturn  Str.get_string('userdata', 'local_gamification').then(function(title) {\n\t\t\treturn ModalFactory.create({\n                type: ModalFactory.types.DEFAULT,\n                title: title,\n                body: this.getBody(args),\n                footer: this.getFooter(),\n            });\n\t\t}.bind(this)).then(function(modal) {\n\t\t\tthis.modal = modal;\n\t\t\tthis.modal.show();\n\t\t\tthis.modal.getRoot().on(ModalEvents.hidden, function() {\n\t\t\t\tmodal.destroy();\n\t\t\t}.bind(this));\n\t\t\tthis.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                modal.hide();\n                setTimeout(function(){\n                    modal.destroy();\n                }, 5000);\n            }.bind(this));\n\t\t});\n\t}\n\n\tpointsInfo.prototype.getBody = function(args){\n\t\t// alert(self);\n\t\t// console.log(this);\n\t\t// console.log(args);\n\t\t// console.log(self.context);\n\t\t// alert(self.context);\n\n\t\t// alert(3);\n\t\treturn Fragment.loadFragment('local_gamification', 'userdetails', this.args.context, this.args);\n\t};\n\n\tpointsInfo.prototype.getFooter = function() {\n\t\t// alert(4);\n        $footer = '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"cancel\", \"moodle\")+'</button>';\n        return $footer;\n    };\n\n\n\treturn \t/** @alias module:local_users/newuser */ {\n\t        // Public variables and functions.\n\t        /**\n\t         * Attach event listeners to initialise this module.\n\t         *\n\t         * @method init\n\t         * @param {string} selector The CSS selector used to find nodes that will trigger this module.\n\t         * @param {int} contextid The contextid for the course.\n\t         * @return {Promise}\n\t         */\n        load: function(){\n        \t// alert('done');\n        },\n\t\tpointsInfo: function(args){\n\t\t\t// console.log(args);\n\t\t\treturn new pointsInfo(args);\n\n\t\t}\n\t}\n});"],"file":"pointsinfo.min.js"}