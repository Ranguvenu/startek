{"version":3,"file":"renderselections.min.js","sources":["../src/renderselections.js"],"sourcesContent":["define(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events'],\n        function($, Str, ModalFactory) {\n    return {\n        init: function() {\n            $(document).on('change', '#id_costcenterid', function() {\n                var costcentervalue = $(this).find(\"option:selected\").val();\n                if (costcentervalue !== null) {\n                    $.ajax({\n                        method: \"GET\",\n                        dataType: \"json\",\n                        url: M.cfg.wwwroot + \"/local/groups/ajax.php?action=departmentlist&costcenter=\"+costcentervalue,\n                        success: function(data){\n                            var template = '<option>'+M.util.get_string(\"selectdepartment\", \"local_users\")+'</option>';\n                              $.each( data.data, function( index, value) {\n                                   template +=\t'<option value = ' + value.id + ' >' +value.fullname + '</option>';\n                              });\n                            $(\"#id_departmentid\").html(template);\n                        }\n                    });\n                }\n            });\n        },\n        displayusers: function(id) {\n            $.ajax({\n                url:M.cfg.wwwroot+\"/local/groups/custom_ajax.php?page=1&id=\"+id,\n                cache: false,\n                success:function(result){\n                        ModalFactory.create({\n                        title: 'Enrolled users',\n                        type: ModalFactory.types.DEFAULT,\n                        body: result\n                    }).done(function(modal) {\n                            this.modal = modal;\n                            modal.show();\n                            modal.setLarge();\n                            modal.getRoot().addClass('openLMStransition');\n                            modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                            modal.getRoot().find('[data-action=\"hide\"]').on('click', function() {\n                                modal.setBody('');\n                            modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                                setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                            });\n                    });                    \n                },\n                error: function(){\n                    $('#onlinetestview'+id).html('error');\n                },                \n                dataType: \"html\"\n            });\n            \n        },\n        deletecohort: function(elem, name) {\n            return Str.get_strings([{\n                key: 'delcohort',\n                component: 'local_groups'\n            }, {\n                key: 'delconfirm',\n                component: 'local_groups',\n                param:name\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+M.util.get_string(\"yes\", \"moodle\")+'</button>&nbsp;' +\n        '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"no\", \"moodle\")+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href =M.cfg.wwwroot +'/local/groups/edit.php?id='+elem+'&confirm=1&delete=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        showhide_cohort: function(elem, name) {\n            return Str.get_strings([{\n                key: 'showcohort',\n                component: 'local_groups'\n            }, {\n                key: 'confirmshow',\n                component: 'local_groups',\n                param:name\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+M.util.get_string(\"yes\", \"moodle\")+'</button>&nbsp;' +\n        '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"no\", \"moodle\")+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href =M.cfg.wwwroot +'/local/groups/edit.php?id='+elem+'&confirm=1&show=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        hideshow_cohort: function(elem, name) {\n            return Str.get_strings([{\n                key: 'hidecohort',\n                component: 'local_groups'\n            }, {\n                key: 'confirmhide',\n                component: 'local_groups',\n                param:name\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+M.util.get_string(\"yes\", \"moodle\")+'</button>&nbsp;' +\n        '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"no\", \"moodle\")+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href =M.cfg.wwwroot +'/local/groups/edit.php?id='+elem+'&confirm=1&hide=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n       \n    };\n});\n"],"names":["define","$","Str","ModalFactory","init","document","on","costcentervalue","this","find","val","ajax","method","dataType","url","M","cfg","wwwroot","success","data","template","util","get_string","each","index","value","id","fullname","html","displayusers","cache","result","create","title","type","types","DEFAULT","body","done","modal","show","setLarge","getRoot","addClass","animate","setBody","setTimeout","destroy","error","deletecohort","elem","name","get_strings","key","component","param","then","s","footer","window","location","href","sesskey","bind","getFooter","hide","showhide_cohort","hideshow_cohort"],"mappings":"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"}