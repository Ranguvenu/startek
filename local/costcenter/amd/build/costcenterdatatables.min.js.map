{"version":3,"file":"costcenterdatatables.min.js","sources":["../src/costcenterdatatables.js"],"sourcesContent":["/**\n *\n * @module     local_costcenter/NewSubdept\n * @package    local_costcenter\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'local_costcenter/jquery.dataTables',\n    'core/str',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/ajax',\n    'jquery',\n    'jqueryui'\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $) {\n    var users;\n    return users = {\n        init: function(args) {            \n        },\n        costcenterDatatable: function(args) {\n            Str.get_strings([{\n                key: 'search',\n                component: 'local_costcenter',\n            }]).then(function(str) {\n                $('#department-index').dataTable({\n                    \"searching\": false,\n                    //\"responsive\": true,\n                    \"aaSorting\": [],\n                    \"lengthMenu\": [[5, 10, 25,50,100, -1], [5,10,25, 50,100, \"All\"]],\n                    \"aoColumnDefs\": [{ 'bSortable': false, 'aTargets': [ 0 ] }],\n                    language: {\n                        search: \"_INPUT_\",\n                        searchPlaceholder: str[0],\n                        \"paginate\": {\n                            \"next\": \">\",\n                            \"previous\": \"<\"\n                        }\n                    }       \n                });\n            }.bind(this));\n        },\n        costcenterDelete: function(args) {\n            return Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'suspendconfirm',\n                component: 'local_users',\n                param :args\n            },\n            {\n                key: 'suspendallconfirm',\n                component: 'local_users'\n            },\n            {\n                key: 'confirm'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    body: args.actionstatusmsg\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[3]);\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        args.confirm = true;\n                        var params = {};\n                        params.id = args.id;\n                        // params.contextid = args.contextid;\n                    \n                        var promise = Ajax.call([{\n                            methodname: 'local_costcenter_delete_costcenter',\n                            args: params\n                        }]);\n                        promise[0].done(function(resp) {\n                            window.location.href = window.location.href;\n                        }).fail(function(ex) {\n                            // do something with the exception\n                             //console.log(ex);\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n        accountchange: function(){\n\n            var params = {};\n\n            params.accountid = $('#id_parentid').find(\"option:selected\").val();\n            params.contextid = $('#id_parentid').data('contextid');\n             params.actions = \"accountselect\";\n            var promise = Ajax.call([{\n                methodname: 'local_costcenter_generate_shortcode',\n                args: params\n            }]);\n            promise[0].done(function(resp){\n                $('.shortnamestatic').html(resp);\n                $('#id_concatshortname').val(resp);\n\n            });\n\n        },\n    };\n});"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","init","args","costcenterDatatable","get_strings","key","component","then","str","language","search","searchPlaceholder","bind","this","costcenterDelete","param","s","create","title","type","types","SAVE_CANCEL","body","actionstatusmsg","done","modal","setSaveButtonText","getRoot","on","save","e","preventDefault","confirm","params","id","call","methodname","resp","window","location","href","fail","ex","show","accountchange","accountid","find","val","contextid","data","actions","html"],"mappings":";;;;;;AAMAA,+CAAO,CACH,qCACA,WACA,qBACA,oBACA,YACA,SACA,aACD,SAASC,UAAWC,IAAKC,aAAcC,YAAaC,KAAMC,SAE1C,CACXC,KAAM,SAASC,QAEfC,oBAAqB,SAASD,MAC1BN,IAAIQ,YAAY,CAAC,CACbC,IAAK,SACLC,UAAW,sBACXC,KAAK,SAASC,KACdR,EAAE,qBAAqBL,UAAU,YAChB,YAEA,cACC,CAAC,CAAC,EAAG,GAAI,GAAG,GAAG,KAAM,GAAI,CAAC,EAAE,GAAG,GAAI,GAAG,IAAK,qBACzC,CAAC,YAAe,WAAmB,CAAE,KACrDc,SAAU,CACNC,OAAQ,UACRC,kBAAmBH,IAAI,YACX,MACA,aACI,SAI1BI,KAAKC,QAEXC,iBAAkB,SAASZ,aAChBN,IAAIQ,YAAY,CAAC,CACpBC,IAAK,WAET,CACIA,IAAK,iBACLC,UAAW,cACXS,MAAOb,MAEX,CACIG,IAAK,oBACLC,UAAW,eAEf,CACID,IAAK,aACLE,KAAK,SAASS,GACdnB,aAAaoB,OAAO,CAChBC,MAAOF,EAAE,GACTG,KAAMtB,aAAauB,MAAMC,YACzBC,KAAMpB,KAAKqB,kBACZC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,kBAAkBV,EAAE,IAC1BS,MAAME,UAAUC,GAAG9B,YAAY+B,KAAM,SAASC,GAC1CA,EAAEC,iBACF7B,KAAK8B,SAAU,MACXC,OAAS,GACbA,OAAOC,GAAKhC,KAAKgC,GAGHnC,KAAKoC,KAAK,CAAC,CACrBC,WAAY,qCACZlC,KAAM+B,UAEF,GAAGT,MAAK,SAASa,MACrBC,OAAOC,SAASC,KAAOF,OAAOC,SAASC,QACxCC,MAAK,SAASC,SAInB9B,KAAKC,OACPY,MAAMkB,QACR/B,KAAKC,QACTD,KAAKC,QAEX+B,cAAe,eAEPX,OAAS,GAEbA,OAAOY,UAAY7C,EAAE,gBAAgB8C,KAAK,mBAAmBC,MAC7Dd,OAAOe,UAAYhD,EAAE,gBAAgBiD,KAAK,aACzChB,OAAOiB,QAAU,gBACJnD,KAAKoC,KAAK,CAAC,CACrBC,WAAY,sCACZlC,KAAM+B,UAEF,GAAGT,MAAK,SAASa,MACrBrC,EAAE,oBAAoBmD,KAAKd,MAC3BrC,EAAE,uBAAuB+C,IAAIV"}