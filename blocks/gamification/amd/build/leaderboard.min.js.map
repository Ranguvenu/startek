{"version":3,"file":"leaderboard.min.js","sources":["../src/leaderboard.js"],"sourcesContent":["define(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/fragment', 'core/ajax', 'core/templates'],\n        function ($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Templates) {\n   \tvar blockContent = function(params){\n   \t\tvar promise = Ajax.call([{\n            methodname: 'block_gamifiaction_block_content',\n            args: params\n        }]);\n        promise[0].done(function(resp){\n        \tTemplates.render('block_gamification/block_view', resp).done(function(html) {\n        \t\t$('.gamification_content.leaderboard').html(html);\n        \t\t$('.leaderboard_content .loading').addClass('hidden');\n        \t});\n        });\n   \t}\n\treturn {\n\t\tblockContent : function(courseid){\n\t\t\tvar block_view = $('.gamification_tabs').data('block_view');\n\t\t\t$(document).on('click', '.gamification_link', function(){\n\t\t\t\tif(!$(this).hasClass('active')){\n\t\t\t\t\t$('.leaderboard_content .loading').removeClass('hidden');\n\t\t\t\t\t$(this).addClass('active').siblings().removeClass('active');\n\t\t\t\t\tvar data = $(this).data();\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.courseid = courseid;\n\t\t\t\t\tparams.type = data.type;\n\t\t\t\t\tparams.block_view = block_view;\n\t\t\t\t\tif(data.startdate == undefined){\n\t\t\t\t\t\tparams.startdate = 0;\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tparams.startdate = data.startdate;\n\t\t\t\t\t}\n\t\t\t\t\tif(data.enddate == undefined){\n\t\t\t\t\t\tparams.enddate = 0;\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tparams.enddate = data.enddate;\n\t\t\t\t\t}\n\t\t\t\t\tif(data.contextid == undefined){\n\t\t\t\t\t\tparams.contextid = 1;\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tparams.contextid = data.contextid;\n\t\t\t\t\t}\n\t\t\t\t\treturn new blockContent(params);\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar data = $('.gamification_tabs').find('.active').data();\n\t\t\tvar params = {};\n\t\t\tparams.courseid = courseid;\n\t\t\tparams.type = data.type;\n\t\t\tparams.block_view = block_view;\n\t\t\tif(data.startdate == undefined){\n\t\t\t\tparams.startdate = 0;\t\n\t\t\t}else{\n\t\t\t\tparams.startdate = data.startdate;\n\t\t\t}\n\t\t\tif(data.enddate == undefined){\n\t\t\t\tparams.enddate = 0;\t\n\t\t\t}else{\n\t\t\t\tparams.enddate = data.enddate;\n\t\t\t}\n\t\t\tif(data.contextid == undefined){\n\t\t\t\tparams.contextid = 1;\t\n\t\t\t}else{\n\t\t\t\tparams.contextid = data.contextid;\n\t\t\t}\n\t\t\treturn new blockContent(params);\n\t\t}\n\t}\n});"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Templates","blockContent","params","call","methodname","args","done","resp","render","html","addClass","courseid","block_view","data","document","on","this","hasClass","removeClass","siblings","type","undefined","startdate","enddate","contextid","find"],"mappings":"AAAAA,wCAAO,CAAC,SAAU,WAAY,qBAAsB,oBAAqB,gBAAiB,YAAa,mBAC/F,SAAUC,EAAGC,IAAKC,aAAcC,YAAaC,SAAUC,KAAMC,eAC7DC,aAAe,SAASC,QACbH,KAAKI,KAAK,CAAC,CAClBC,WAAY,mCACZC,KAAMH,UAEF,GAAGI,MAAK,SAASC,MACxBP,UAAUQ,OAAO,gCAAiCD,MAAMD,MAAK,SAASG,MACrEf,EAAE,qCAAqCe,KAAKA,MAC5Cf,EAAE,iCAAiCgB,SAAS,uBAI9C,CACNT,aAAe,SAASU,cACnBC,WAAalB,EAAE,sBAAsBmB,KAAK,cAC9CnB,EAAEoB,UAAUC,GAAG,QAAS,sBAAsB,eACzCrB,EAAEsB,MAAMC,SAAS,UAAU,CAC9BvB,EAAE,iCAAiCwB,YAAY,UAC/CxB,EAAEsB,MAAMN,SAAS,UAAUS,WAAWD,YAAY,cAC9CL,KAAOnB,EAAEsB,MAAMH,OACfX,OAAS,UACbA,OAAOS,SAAWA,SAClBT,OAAOkB,KAAOP,KAAKO,KACnBlB,OAAOU,WAAaA,WACCS,MAAlBR,KAAKS,UACPpB,OAAOoB,UAAY,EAEnBpB,OAAOoB,UAAYT,KAAKS,UAEND,MAAhBR,KAAKU,QACPrB,OAAOqB,QAAU,EAEjBrB,OAAOqB,QAAUV,KAAKU,QAEFF,MAAlBR,KAAKW,UACPtB,OAAOsB,UAAY,EAEnBtB,OAAOsB,UAAYX,KAAKW,UAElB,IAAIvB,aAAaC,gBAGtBW,KAAOnB,EAAE,sBAAsB+B,KAAK,WAAWZ,OAC/CX,OAAS,UACbA,OAAOS,SAAWA,SAClBT,OAAOkB,KAAOP,KAAKO,KACnBlB,OAAOU,WAAaA,WACCS,MAAlBR,KAAKS,UACPpB,OAAOoB,UAAY,EAEnBpB,OAAOoB,UAAYT,KAAKS,UAEND,MAAhBR,KAAKU,QACPrB,OAAOqB,QAAU,EAEjBrB,OAAOqB,QAAUV,KAAKU,QAEFF,MAAlBR,KAAKW,UACPtB,OAAOsB,UAAY,EAEnBtB,OAAOsB,UAAYX,KAAKW,UAElB,IAAIvB,aAAaC"}