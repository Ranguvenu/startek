{"version":3,"file":"visualformchanges.min.js","sources":["../src/visualformchanges.js"],"sourcesContent":["/**\n * Add a create new group modal to the page.\n *\n * @module     block_gamification/visualformchanges\n * @class      Visual form changes\n * @package    block_gamification\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/fragment', 'core/ajax', 'core/yui'],\n        function ($, Str, ModalFactory, ModalEvents, Fragment, Ajax) {\n    'use strict';\n    var visualformchanges = function (costcentervalue){\n        $.ajax({\n            method: \"POST\",\n            dataType: \"json\",\n            url: M.cfg.wwwroot + \"/blocks/gamification/customajax.php?action=get_costcentercourses&costcenter=\"+costcentervalue,\n            success: function(data){\n                var template = '';\n                $.each( data.courses, function( index, value) {\n                    template += '<option value = ' + index + ' >' +value + '</option>';\n                });\n                $(\"#course_select\").html(template);\n                // var leveltemplate = '<option value=0>Select Courses</option>'\n                var leveltemplate = ''\n                $.each( data.levels, function( index, value) {\n                    leveltemplate += '<option value = ' + index + ' >' +value + '</option>';\n                });\n                $(\"#level_select\").html(leveltemplate);\n            }\n        });\n    }\n    return {\n        load: function (){\n        \t$(document).on('change', '#costcenterselect', function() {\n        \t\tvar costcentervalue = $(this).find(\"option:selected\").val();\n        \t\tif (costcentervalue !== null) {\n        \t\t\treturn new visualformchanges(costcentervalue);\n        \t\t}\n        \t});\n    \t\t// $(document).ready(function(){\n    \t\t// \tvar costcentervalue = $('#costcenterselect').find(\"option:selected\").val();\n    \t\t// \tif (costcentervalue !== null) {\n      //   \t\t\treturn new visualformchanges(costcentervalue);\n      //   \t\t}\n    \t\t// });\n        },\n        init: function(args) {\n        \tconsole.log(args);\n        \treturn Str.get_strings([{\n                key: 'confirm'\n            },\n            {\n                key: 'deleteconfirm',\n                component: 'block_gamification',\n                param :args\n            },\n            {\n                key: 'delete'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.CONFIRM,\n                    body: s[1]\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.setSaveButtonText(s[2]);\n                    modal.getRoot().on(ModalEvents.yes, function(e) {\n                        e.preventDefault();\n                        $.ajax({\n                        \tmethod: \"POST\",\n\t\t\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\t\t\turl: M.cfg.wwwroot + \"/blocks/gamification/customajax.php?action=deletebadge&badgeid=\"+args.badgeid,\n\t\t\t\t      \t\tsuccess: function(data){\n\t\t\t\t      \t\t\twindow.location.href = window.location.href;\n\t\t\t\t      \t\t}\n                        });\n                    }.bind(this));\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        }\n    };\n});"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","visualformchanges","costcentervalue","ajax","method","dataType","url","M","cfg","wwwroot","success","data","template","each","courses","index","value","html","leveltemplate","levels","load","document","on","this","find","val","init","args","console","log","get_strings","key","component","param","then","s","create","title","type","types","CONFIRM","body","done","modal","setSaveButtonText","getRoot","yes","e","preventDefault","badgeid","window","location","href","bind","show"],"mappings":";;;;;;;;AAQAA,8CAAO,CAAC,SAAU,WAAY,qBAAsB,oBAAqB,gBAAiB,YAAa,aAC/F,SAAUC,EAAGC,IAAKC,aAAcC,YAAaC,SAAUC,UAEvDC,kBAAoB,SAAUC,iBAC9BP,EAAEQ,KAAK,CACHC,OAAQ,OACRC,SAAU,OACVC,IAAKC,EAAEC,IAAIC,QAAU,+EAA+EP,gBACpGQ,QAAS,SAASC,UACVC,SAAW,GACfjB,EAAEkB,KAAMF,KAAKG,SAAS,SAAUC,MAAOC,OACnCJ,UAAY,mBAAqBG,MAAQ,KAAMC,MAAQ,eAE3DrB,EAAE,kBAAkBsB,KAAKL,cAErBM,cAAgB,GACpBvB,EAAEkB,KAAMF,KAAKQ,QAAQ,SAAUJ,MAAOC,OAClCE,eAAiB,mBAAqBH,MAAQ,KAAMC,MAAQ,eAEhErB,EAAE,iBAAiBsB,KAAKC,yBAI7B,CACHE,KAAM,WACLzB,EAAE0B,UAAUC,GAAG,SAAU,qBAAqB,eACzCpB,gBAAkBP,EAAE4B,MAAMC,KAAK,mBAAmBC,SAC9B,OAApBvB,uBACI,IAAID,kBAAkBC,qBAUhCwB,KAAM,SAASC,aACdC,QAAQC,IAAIF,MACL/B,IAAIkC,YAAY,CAAC,CACjBC,IAAK,WAET,CACIA,IAAK,gBACLC,UAAW,qBACXC,MAAON,MAEX,CACII,IAAK,YACLG,KAAK,SAASC,GACdtC,aAAauC,OAAO,CAChBC,MAAOF,EAAE,GACTG,KAAMzC,aAAa0C,MAAMC,QACzBC,KAAMN,EAAE,KACTO,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,kBAAkBT,EAAE,IAC1BQ,MAAME,UAAUvB,GAAGxB,YAAYgD,IAAK,SAASC,GACzCA,EAAEC,iBACFrD,EAAEQ,KAAK,CACNC,OAAQ,OAC1BC,SAAU,OACVC,IAAKC,EAAEC,IAAIC,QAAU,kEAAkEkB,KAAKsB,QACvFvC,QAAS,SAASC,MACjBuC,OAAOC,SAASC,KAAOF,OAAOC,SAASC,SAG9BC,KAAK9B,OACPoB,MAAMW,QACRD,KAAK9B,QACT8B,KAAK9B"}