/**
 * Add a create new event modal to the page.
 *
 * @module     blocks/my calendar
 * @package    calendar
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_my_event_calendar/event_popup",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui"],(function($,Str,ModalFactory,ModalEvents){return{popup_eventinfo:function(args){var tmp,btn="",event_details="",pop_desc=args.eventlocal_eventname;switch("session_open"==args.eventeventtype||"open"==args.eventeventtype?"null"==args.eventlocal_eventenddate?event_details+='<div class="row  mt-10 mb-10"><div class="col-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="When" aria-label="When"></i> </div><div class="col-11"> Opens on '+args.eventlocal_eventstartdate+"</div></div>":event_details+='<div class="row  mt-10 mb-10"><div class="col-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="When" aria-label="When"></i> </div><div class="col-11">'+args.eventlocal_eventstartdate+" - "+args.eventlocal_eventenddate+"</div></div>":"session_close"!=args.eventeventtype&&"close"!=args.eventeventtype||(event_details+='<div class="row  mt-10 mb-10"><div class="col-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="When" aria-label="When"></i> </div><div class="col-11"> Closes on '+args.eventlocal_eventenddate+"</div></div>"),event_details+='<div class="row  mt-10 mb-10"><div class="col-1"> <i class="icon fa fa-align-left fa-fw " aria-hidden="true" title="Trainers" aria-label="Trainers"></i></i> </div><div class="col-11">'+args.eventtrainer+"</div></div>",event_details+='<div class="row  mt-10 mb-10"><div class="col-1"> <i class="icon fa fa-map-marker fa-fw " aria-hidden="true" title="Location" aria-label="Location"></i> </div><div class="col-11">'+args.eventlocation+"</div></div>",btn+='<ul class="eventpopup_footer">',args.eventplugin){case"local_classroom":if(0==args.eventenrolled&&1==args.eventself_enrol)btn+=(tmp=null,$.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_classroom",success:function(returndata){tmp=1==returndata?"<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_classroom/classroom').ManageclassroomStatus({action:'selfenrol', id: "+args.eventinstance+", classroomid:"+args.eventinstance+",actionstatusmsg:'classroom_self_enrolment',classroomname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">Enrol</button></a> </li>':"<li>Not published</li>"}}),tmp);else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/local/classroom/view.php?cid="+args.eventinstance+'" target="_blank"><button class="btn">Launch</button></a> </li>');break;case"local_program":if(0==args.eventenrolled&&1==args.eventself_enrol){var button_program=function(){var tmp=null;return $.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_program",success:function(returndata){tmp=1==returndata?"<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_program/program').ManageprogramStatus({action:'selfenrol', id: "+args.eventinstance+", programid:"+args.eventinstance+",actionstatusmsg:'program_self_enrolment',programname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">Enrol</button></a> </li>':"<li>Not published</li>"}}),tmp}();btn+=button_program}else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/local/program/view.php?bcid="+args.eventinstance+'" target="_blank"><button class="btn">Launch</button></a> </li>');break;case"local_certification":if(0==args.eventenrolled&&1==args.eventself_enrol){var button_certification=function(){var tmp=null;return $.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_certification",success:function(returndata){tmp=1==returndata?"<li><a href= \"javascript:void(0)\"  onclick=\"(function(e){ require('local_certification/certification').ManagecertificationStatus({action:'selfenrol', id: "+args.eventinstance+", certificationid:"+args.eventinstance+",actionstatusmsg:'certification_self_enrolment',certificationname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">Enrol</button></a> </li>':"<li>Not published</li>"}}),tmp}();btn+=button_certification}else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/local/certification/view.php?ctid="+args.eventinstance+'" target="_blank"><button class="btn">Launch</button></a> </li>');break;default:btn+='<li><a href="'+M.cfg.wwwroot+'" target="_blank"></li>'}btn+="</ul>",ModalFactory.create({title:pop_desc,body:event_details,footer:btn}).done((function(modal){modal.show(),modal.getRoot().click(function(e){modal.show()}.bind(this)),$(".close").click(function(e){modal.hide(),modal.destroy()}.bind(this))}))},load:function(){}}}));

//# sourceMappingURL=event_popup.min.js.map