/**
 * Add a create new event modal to the page.
 *
 * @module     blocks/training calendar
 * @package    calendar
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_training_calendar/event_popup",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui"],(function($,Str,ModalFactory,ModalEvents){return{popup_eventinfo:function(args){return customstrings=Str.get_strings([{key:"when",component:"block_training_calendar"},{key:"openson",component:"block_training_calendar"},{key:"closeson",component:"block_training_calendar"},{key:"eventtype",component:"block_training_calendar"},{key:"summary"},{key:"trainers",component:"block_training_calendar"},{key:"location",component:"block_training_calendar"},{key:"enrol",component:"block_training_calendar"},{key:"request",component:"block_training_calendar"},{key:"processing",component:"block_training_calendar"},{key:"waiting",component:"block_training_calendar"},{key:"notpublished",component:"block_training_calendar"},{key:"launch",component:"block_training_calendar"},{key:"view"}]),customstrings.then(function(strings){var tmp,btn="",event_details="",other_details=1,pop_desc=args.eventlocal_eventname;switch("session_open"==args.eventeventtype||"open"==args.eventeventtype?"null"==args.eventlocal_eventenddate?event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="'+strings[0]+'" aria-label="When"></i> </div><div class="col-xs-11"> '+strings[1]+args.eventlocal_eventstartdate+"</div></div>":event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="'+strings[0]+'" aria-label="When"></i> </div><div class="col-xs-11">'+args.eventlocal_eventstartdate+" - "+args.eventlocal_eventenddate+"</div></div>":"session_close"==args.eventeventtype||"close"==args.eventeventtype?event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="'+strings[0]+'" aria-label="When"></i> </div><div class="col-xs-11"> '+strings[2]+args.eventlocal_eventenddate+"</div></div>":(event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-clock-o fa-fw " aria-hidden="true" title="'+strings[0]+'" aria-label="When"></i> </div><div class="col-xs-11"> '+args.eventlocal_eventstartdate+"</div></div>",event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-calendar fa-fw  " aria-hidden="true" title="'+strings[3]+'" aria-label="Event type"></i></i> </div><div class="col-xs-11">'+args.eventeventtype+"</div></div>",event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-align-left fa-fw " aria-hidden="true" title="'+strings[4]+'" aria-label="Summary"></i></i> </div><div class="col-xs-11">'+args.eventsummary+"</div></div>",other_details=0),1==other_details&&(event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-align-left fa-fw " aria-hidden="true" title="'+strings[5]+'" aria-label="Trainers"></i></i> </div><div class="col-xs-11">'+args.eventtrainer+"</div></div>",event_details+='<div class="row  mt-10 mb-10"><div class="col-xs-1"> <i class="icon fa fa-map-marker fa-fw " aria-hidden="true" title="'+strings[6]+'" aria-label="Location"></i> </div><div class="col-xs-11">'+args.eventlocation+"</div></div>"),btn+='<ul class="eventpopup_footer">',args.eventplugin){case"local_classroom":if(0==args.eventenrolled&&1==args.eventself_enrol)btn+=(tmp=null,$.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_classroom",success:function(returndata){tmp=1==returndata?"<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_classroom/classroom').ManageclassroomStatus({action:'selfenrol', id: "+args.eventinstance+", classroomid:"+args.eventinstance+",actionstatusmsg:'classroom_self_enrolment',classroomname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">'+strings[7]+"</button></a> </li>":2==returndata?"<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_classroom/classroom').ManageclassroomStatus({action:'enrolrequest', id: "+args.eventinstance+", classroomid:"+args.eventinstance+",actionstatusmsg:'classroom_enrolrequest_enrolment',classroomname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">'+strings[8]+"</button></a> </li>":3==returndata?'<li><button class="btn">'+strings[9]+"</button></li>":4==returndata?'<li><button class="btn">'+strings[10]+"</button></li>":"<li>"+strings[11]+"</li>"}}),tmp);else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/local/classroom/view.php?cid="+args.eventinstance+'" target="_blank"><button class="btn">'+strings[12]+"</button></a> </li>");break;case"local_program":if(0==args.eventenrolled&&1==args.eventself_enrol){var button_program=function(){var tmp=null;return $.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_program",success:function(returndata){tmp=1==returndata?"<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_program/program').ManageprogramStatus({action:'selfenrol', id: "+args.eventinstance+", programid:"+args.eventinstance+",actionstatusmsg:'program_self_enrolment',programname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">'+strings[7]+"</button></a> </li>":"<li>"+strings[11]+"</li>"}}),tmp}();btn+=button_program}else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/local/program/view.php?bcid="+args.eventinstance+'" target="_blank"><button class="btn">'+strings[12]+"</button></a> </li>");break;case"local_certification":if(0==args.eventenrolled&&1==args.eventself_enrol){var button_certification=function(){var tmp=null;return $.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_certification",success:function(returndata){tmp=1==returndata?"<li><a href= \"javascript:void(0)\"  onclick=\"(function(e){ require('local_certification/certification').ManagecertificationStatus({action:'selfenrol', id: "+args.eventinstance+", certificationid:"+args.eventinstance+",actionstatusmsg:'certification_self_enrolment',certificationname:'"+args.eventlocal_eventname+'\'}) })(event)"><button class="btn">'+strings[7]+"</button></a> </li>":"<li>"+strings[11]+"</li>"}}),tmp}();btn+=button_certification}else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/local/certification/view.php?ctid="+args.eventinstance+'" target="_blank"><button class="btn">'+strings[12]+"</button></a> </li>");break;case"course":if(0==args.eventenrolled&&1==args.eventself_enrol){var button_course=function(){var tmp=null;return $.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+args.eventinstance+"&plugin=local_certification",success:function(returndata){tmp=1==returndata?'<li><a href= "'+M.cfg.wwwroot+"/course/view.php?id="+args.eventinstance+'" target="_blank"><button class="btn">'+strings[13]+"</button></a> </li>":"<li>"+strings[11]+"</li>"}}),tmp}();btn+=button_course}else 1==args.eventenrolled&&(btn+='<li><a href= "'+M.cfg.wwwroot+"/course/view.php?id="+args.eventinstance+'" ><button class="btn">'+strings[13]+"</button></a> </li>");break;default:btn+='<li><a href="'+M.cfg.wwwroot+'" target="_blank"></li>'}btn+="</ul>",ModalFactory.create({title:pop_desc,body:event_details,footer:btn}).done((function(modal){modal.show(),modal.getRoot().click(function(e){modal.show()}.bind(this)),$(".close").click(function(e){modal.hide(),modal.destroy()}.bind(this))}))}.bind(this))},load:function(){}}}));

//# sourceMappingURL=event_popup.min.js.map