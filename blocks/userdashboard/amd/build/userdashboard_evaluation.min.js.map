{"version":3,"file":"userdashboard_evaluation.min.js","sources":["../src/userdashboard_evaluation.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle selection changes and actions on the competency tree.\n *\n * @module     block_userdasboard/elearning\n * @package    block_userdasboard\n * @copyright  2018 Maheshchandra <maheshchandra@eabyas.in>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/url',\n        'core/templates',\n        'core/notification',\n        'core/str',\n        'core/ajax',\n        //'block_userdashboard/jquery.dataTables',\n        ], function($,url, templates, notification, str, ajax) {\n\n\n    var userdashboardEvaluation = function(filter){       \n      self._filter ='';         \n      self._template='';\n      self._targetSelector='';\n      self._menu=0;\n      self.filter_text = '';\n    };\n\n    userdashboardEvaluation.prototype._getajaxCourses = function(){\n\n        self._menu=0;\n        if(self._filter=='menu'){\n            self._menu=1;\n            self._filter='inprogress';\n        }\n        var removeRelated = ajax.call([{\n            methodname: 'block_userdashboard_data_for_evaluation_courses',\n                args:  {\n                    filter: self._filter,\n                    filter_text: self._filter_text\n                }\n            }\n        ]);\n        removeRelated[0].done(function(context) {\n            context.inprogress_elearning=$.parseJSON(context.inprogress_elearning);\n            templates.render('block_userdashboard/loading', {});\n            templates.render(self._template, context).then(function(html,js) { \n                if(self._menu == 1){\n                    userdashboardEvaluation.prototype.frommenu_target_evaluation(html,'#evaluation_courses');\n                }              \n                else { \n                    var existing_active = $(\".divslide .active_subtab\").attr('id');\n                    $('#'+existing_active).html('');\n                    $('#userdashboard_filter').attr(\"data-filter\" , self._filter);\n                    $(self._targetSelector).siblings().removeClass('active_subtab');         \n                    $(self._targetSelector).addClass('active_subtab');\n                    $(self._targetSelector).html(html);  \n                }\n                //userdashboardEvaluation.prototype.blockDatatable(self._filter);           \n            }).fail(notification.exception);\n        }).fail(notification.exception); \n    };\n\n\n    userdashboardEvaluation.prototype._setter = function(filter,filter_text){      \n  \n        self._filter = filter;\n        self._filter_text = filter_text; \n        if(self._filter =='inprogress'){\n            self._template='block_userdashboard/evaluation_courses_innercontent';\n            self._targetSelector ='#elearning_inprogress';\n        }\n\n        if(self._filter =='completed'){\n           self._template='block_userdashboard/evaluation_courses_innercontent';\n           self._targetSelector ='#elearning_completed';\n        }\n\n        if(self._filter=='menu'){\n          self._template ='block_userdashboard/userdashboard_courses';\n          self._targetSelector ='#elearning_inprogress';\n        }\n\n        return  userdashboardEvaluation.prototype._getajaxCourses();\n\n    };\n    \n    userdashboardEvaluation.prototype.frommenu_target_evaluation = function (html, menu_targetselector){\n        $('.dashboard-stat').removeClass('active_main_tab');\n        $('#elearning_courses').addClass('active_main_tab');\n        $(menu_targetselector).parent('.dashboard-stat').addClass('active_main_tab');\n        $(\"#linked_course_details_info\").html(html);\n    };\n\n    //userdashboardEvaluation.prototype.blockDatatable = function(filter) {\n    //    $(\".userdashboard_table_content\"+filter).dataTable({\n    //        \"bInfo\" : false,\n    //        \"responsive\" : false,\n    //        \"bFilter\": false, //hide Search bar\n    //        \"bLengthChange\": false,\n    //        \"language\": {\n    //            \"paginate\": {\n    //                \"next\": \">\",\n    //                \"previous\": \"<\"\n    //            }\n    //        },\n    //        \"pageLength\": 5   \n    //    });\n    //};\n\n    userdashboardEvaluation.callEvaluation = function(filter,filter_text){\n        userdashboardEvaluation.prototype._setter(filter,filter_text);\n    };\n\n     /** @alias module:block_userdashboard/userdashboard_elearning.js userdashboardElearning  */ \n    return userdashboardEvaluation;\n}); // end of main function"],"names":["define","$","url","templates","notification","str","ajax","userdashboardEvaluation","filter","self","_filter","_template","_targetSelector","_menu","filter_text","prototype","_getajaxCourses","call","methodname","args","_filter_text","done","context","inprogress_elearning","parseJSON","render","then","html","js","frommenu_target_evaluation","existing_active","attr","siblings","removeClass","addClass","fail","exception","_setter","menu_targetselector","parent","callEvaluation"],"mappings":";;;;;;;;AAuBAA,sDAAO,CAAC,SACA,WACA,iBACA,oBACA,WACA,cAEG,SAASC,EAAEC,IAAKC,UAAWC,aAAcC,IAAKC,UAGjDC,wBAA0B,SAASC,QACrCC,KAAKC,QAAS,GACdD,KAAKE,UAAU,GACfF,KAAKG,gBAAgB,GACrBH,KAAKI,MAAM,EACXJ,KAAKK,YAAc,WAGrBP,wBAAwBQ,UAAUC,gBAAkB,WAEhDP,KAAKI,MAAM,EACM,QAAdJ,KAAKC,UACJD,KAAKI,MAAM,EACXJ,KAAKC,QAAQ,cAEGJ,KAAKW,KAAK,CAAC,CAC3BC,WAAY,kDACRC,KAAO,CACHX,OAAQC,KAAKC,QACbI,YAAaL,KAAKW,iBAIhB,GAAGC,MAAK,SAASC,SAC3BA,QAAQC,qBAAqBtB,EAAEuB,UAAUF,QAAQC,sBACjDpB,UAAUsB,OAAO,8BAA+B,IAChDtB,UAAUsB,OAAOhB,KAAKE,UAAWW,SAASI,MAAK,SAASC,KAAKC,OACxC,GAAdnB,KAAKI,MACJN,wBAAwBQ,UAAUc,2BAA2BF,KAAK,2BAEjE,KACGG,gBAAkB7B,EAAE,4BAA4B8B,KAAK,MACzD9B,EAAE,IAAI6B,iBAAiBH,KAAK,IAC5B1B,EAAE,yBAAyB8B,KAAK,cAAgBtB,KAAKC,SACrDT,EAAEQ,KAAKG,iBAAiBoB,WAAWC,YAAY,iBAC/ChC,EAAEQ,KAAKG,iBAAiBsB,SAAS,iBACjCjC,EAAEQ,KAAKG,iBAAiBe,KAAKA,UAGlCQ,KAAK/B,aAAagC,cACtBD,KAAK/B,aAAagC,YAIzB7B,wBAAwBQ,UAAUsB,QAAU,SAAS7B,OAAOM,oBAExDL,KAAKC,QAAUF,OACfC,KAAKW,aAAeN,YACF,cAAfL,KAAKC,UACJD,KAAKE,UAAU,sDACfF,KAAKG,gBAAiB,yBAGR,aAAfH,KAAKC,UACLD,KAAKE,UAAU,sDACfF,KAAKG,gBAAiB,wBAGR,QAAdH,KAAKC,UACND,KAAKE,UAAW,4CAChBF,KAAKG,gBAAiB,yBAGhBL,wBAAwBQ,UAAUC,mBAI9CT,wBAAwBQ,UAAUc,2BAA6B,SAAUF,KAAMW,qBAC3ErC,EAAE,mBAAmBgC,YAAY,mBACjChC,EAAE,sBAAsBiC,SAAS,mBACjCjC,EAAEqC,qBAAqBC,OAAO,mBAAmBL,SAAS,mBAC1DjC,EAAE,+BAA+B0B,KAAKA,OAmB1CpB,wBAAwBiC,eAAiB,SAAShC,OAAOM,aACrDP,wBAAwBQ,UAAUsB,QAAQ7B,OAAOM,cAI9CP"}