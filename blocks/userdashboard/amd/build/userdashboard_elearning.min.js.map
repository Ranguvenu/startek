{"version":3,"file":"userdashboard_elearning.min.js","sources":["../src/userdashboard_elearning.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle selection changes and actions on the competency tree.\n *\n * @module     block_userdasboard/elearning\n * @package    block_userdasboard\n * @copyright  2018 hemalathacarun <hemalatha@eabyas.in>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/url',\n        'core/templates',\n        'core/notification',\n        'core/str',\n        'core/ajax'\n        ], function($,url, templates, notification, str, ajax) {\n\n\n    var userdashboardElearning = function(filter){       \n      self._filter ='';         \n      self._template='';\n      self._targetSelector='';\n      self._menu=0;\n      self.filter_text = '';\n    \n    };\n\n    userdashboardElearning.prototype._getajaxCourses = function(){\n        // alert('4');\n        // alert(self._filter_text);\n        self._menu = 0;\n        if(self._filter=='menu'){\n            self._menu = 1;\n            self._filter = 'inprogress';\n            self._offset = 0;\n            self._limit = 2;\n        }\n\n        var removeRelated = ajax.call([{\n            methodname: 'block_userdashboard_data_for_elearning_courses',\n                args:  {\n                    filter: self._filter,\n                    filter_text: self._filter_text,\n                    filter_offset: self._offset,\n                    filter_limit: self._limit\n                }\n            }\n        ]);\n        \n        removeRelated[0].done(function(context) {\n            \n            context.inprogress_elearning=$.parseJSON(context.inprogress_elearning);\n            // context.filter_form = $.parseJSON(context.filter_form);\n            templates.render('block_userdashboard/loading', {});\n            templates.render(self._template, context).then(function(html,js) { \n                if(self._menu==1){\n                    userdashboardElearning.prototype.frommenu_target_elearning(html,'#elearning_courses');\n                }              \n                else {\n                    var existing_active = $(\".divslide .active_subtab\").attr('id');\n                    $('#'+existing_active).html('');\n                    $('#userdashboard_filter').attr(\"data-filter\" , self._filter);\n                    $(self._targetSelector).siblings().removeClass('active_subtab');         \n                    $(self._targetSelector).addClass('active_subtab');\n                    $(self._targetSelector).html(html);  \n                }           \n            }).fail(notification.exception);\n        }).fail(notification.exception);\n    };\n\n\n    userdashboardElearning.prototype._setter = function(filter,filter_text){      \n        // alert('3');\n        // alert(filter_text);\n        self._filter = filter;\n        self._filter_text = filter_text;\n        if(self._filter =='inprogress'){\n            self._template='block_userdashboard/elearning_courses_innercontent';\n            self._targetSelector ='#elearning_inprogress';\n        }\n\n        if(self._filter =='completed'){\n           self._template='block_userdashboard/elearning_courses_innercontent';\n           self._targetSelector ='#elearning_completed';\n        }\n\n        if(self._filter=='menu'){\n          self._template ='block_userdashboard/userdashboard_courses';\n          self._targetSelector ='#elearning_inprogress';\n        }\n\n        return  userdashboardElearning.prototype._getajaxCourses();\n\n    };\n    \n    userdashboardElearning.prototype.frommenu_target_elearning= function (html, menu_targetselector){\n        // alert('5');\n        $('.dashboard-stat').removeClass('active_main_tab');\n        $('#elearning_courses').addClass('active_main_tab');\n        $(menu_targetselector).parent('.dashboard-stat').addClass('active_main_tab');\n        $(\"#linked_course_details_info\").html(html);\n    };\n\n    userdashboardElearning.callElearning = function(filter,filter_text){\n        // alert('2');      \n        userdashboardElearning.prototype._setter(filter,filter_text);\n    };\n\n   \n\n    /** @alias module:block_userdashboard/userdashboard_elearning.js userdashboardElearning  **/ \n        return userdashboardElearning;\n    \n}); // end of main function"],"names":["define","$","url","templates","notification","str","ajax","userdashboardElearning","filter","self","_filter","_template","_targetSelector","_menu","filter_text","prototype","_getajaxCourses","_offset","_limit","call","methodname","args","_filter_text","filter_offset","filter_limit","done","context","inprogress_elearning","parseJSON","render","then","html","js","frommenu_target_elearning","existing_active","attr","siblings","removeClass","addClass","fail","exception","_setter","menu_targetselector","parent","callElearning"],"mappings":";;;;;;;;AAuBAA,qDAAO,CAAC,SACA,WACA,iBACA,oBACA,WACA,cACG,SAASC,EAAEC,IAAKC,UAAWC,aAAcC,IAAKC,UAGjDC,uBAAyB,SAASC,QACpCC,KAAKC,QAAS,GACdD,KAAKE,UAAU,GACfF,KAAKG,gBAAgB,GACrBH,KAAKI,MAAM,EACXJ,KAAKK,YAAc,WAIrBP,uBAAuBQ,UAAUC,gBAAkB,WAG/CP,KAAKI,MAAQ,EACI,QAAdJ,KAAKC,UACJD,KAAKI,MAAQ,EACbJ,KAAKC,QAAU,aACfD,KAAKQ,QAAU,EACfR,KAAKS,OAAS,GAGEZ,KAAKa,KAAK,CAAC,CAC3BC,WAAY,iDACRC,KAAO,CACHb,OAAQC,KAAKC,QACbI,YAAaL,KAAKa,aAClBC,cAAed,KAAKQ,QACpBO,aAAcf,KAAKS,WAKjB,GAAGO,MAAK,SAASC,SAE3BA,QAAQC,qBAAqB1B,EAAE2B,UAAUF,QAAQC,sBAEjDxB,UAAU0B,OAAO,8BAA+B,IAChD1B,UAAU0B,OAAOpB,KAAKE,UAAWe,SAASI,MAAK,SAASC,KAAKC,OAC1C,GAAZvB,KAAKI,MACJN,uBAAuBQ,UAAUkB,0BAA0BF,KAAK,0BAE/D,KACGG,gBAAkBjC,EAAE,4BAA4BkC,KAAK,MACzDlC,EAAE,IAAIiC,iBAAiBH,KAAK,IAC5B9B,EAAE,yBAAyBkC,KAAK,cAAgB1B,KAAKC,SACrDT,EAAEQ,KAAKG,iBAAiBwB,WAAWC,YAAY,iBAC/CpC,EAAEQ,KAAKG,iBAAiB0B,SAAS,iBACjCrC,EAAEQ,KAAKG,iBAAiBmB,KAAKA,UAElCQ,KAAKnC,aAAaoC,cACtBD,KAAKnC,aAAaoC,YAIzBjC,uBAAuBQ,UAAU0B,QAAU,SAASjC,OAAOM,oBAGvDL,KAAKC,QAAUF,OACfC,KAAKa,aAAeR,YACF,cAAfL,KAAKC,UACJD,KAAKE,UAAU,qDACfF,KAAKG,gBAAiB,yBAGR,aAAfH,KAAKC,UACLD,KAAKE,UAAU,qDACfF,KAAKG,gBAAiB,wBAGR,QAAdH,KAAKC,UACND,KAAKE,UAAW,4CAChBF,KAAKG,gBAAiB,yBAGhBL,uBAAuBQ,UAAUC,mBAI7CT,uBAAuBQ,UAAUkB,0BAA2B,SAAUF,KAAMW,qBAExEzC,EAAE,mBAAmBoC,YAAY,mBACjCpC,EAAE,sBAAsBqC,SAAS,mBACjCrC,EAAEyC,qBAAqBC,OAAO,mBAAmBL,SAAS,mBAC1DrC,EAAE,+BAA+B8B,KAAKA,OAG1CxB,uBAAuBqC,cAAgB,SAASpC,OAAOM,aAEnDP,uBAAuBQ,UAAU0B,QAAQjC,OAAOM,cAMzCP"}