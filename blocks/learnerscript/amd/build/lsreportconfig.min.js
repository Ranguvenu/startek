define("block_learnerscript/lsreportconfig",["core/ajax","jquery","jqueryui"],(function(Ajax,$){var lsreportconfig={slideIndex:1,currentSlide:function(currentSlideIndex){lsreportconfig.lsreportslideshow(lsreportconfig.slideIndex=currentSlideIndex)},progressbar:$("#progressbar"),lsreportslideshow:function(currentSlideIndex){var i,slides=document.getElementsByClassName("mySlides");document.getElementsByClassName("demo");for(currentSlideIndex>slides.length&&(lsreportconfig.slideIndex=1),currentSlideIndex<1&&(lsreportconfig.slideIndex=slides.length),i=0;i<slides.length;i++)slides[i].style.display="none";slides[lsreportconfig.slideIndex-1].style.display="block",setTimeout((function(){lsreportconfig.slideIndex>=slides.length?lsreportconfig.currentSlide(1):lsreportconfig.lsreportslideshow(lsreportconfig.slideIndex++)}),3e3)},lsconfigimportprogress:function(args){lsreportconfig.progressbar.progressbar("value");var total=args.total,current=args.current,errorreportspositiondata=args.errorreportspositiondata,lastreportposition=args.lastreportposition;Ajax.call([{methodname:"block_learnerscript_importreports",args:{total:total,current:current,errorreportspositiondata:errorreportspositiondata,lastreportposition:lastreportposition}}],!1)[0].done((function(response){resp=$.parseJSON(response),lsreportconfig.progressbar.progressbar("value",resp.percent),resp.percent<100&&(resp.current&&resp.current>0?args.current=resp.current:args.current=args.current+1,setTimeout((function(){lsreportconfig.lsconfigimportprogress(args)}),500))}))},lsconfigresetprogress:function(step){Ajax.call([{methodname:"block_learnerscript_resetlsconfig",args:{step:step}}],!1)[0].done((function(response){resp=$.parseJSON(response),lsreportconfig.progressbar.progressbar("value",resp.percent),100==resp.percent&&(window.location.href=M.cfg.wwwroot+"/blocks/learnerscript/lsconfig.php?import=1"),resp.percent<100&&(resp.next&&resp.next>0&&(step=resp.next),setTimeout((function(){lsreportconfig.lsconfigresetprogress(step)}),500))}))},lsreportconfigimport:function(){Ajax.call([{methodname:"block_learnerscript_lsreportconfigimport",args:{}}])[0].done((function(response){return"Message from onbeforeunload handler"}))}};return{init:function(args,status){lsreportconfig.progressbar.progressbar({value:!1,change:function(){},complete:function(){$("#reportdashboardnav").show(500)}}),$(".mySlides").length>0&&lsreportconfig.lsreportslideshow(1),"import"==status?lsreportconfig.lsconfigimportprogress(args):"reset"==status&&lsreportconfig.lsconfigresetprogress(1),window.onbeforeunload=lsreportconfig.lsreportconfigimport}}}));

//# sourceMappingURL=lsreportconfig.min.js.map