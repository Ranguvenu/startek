{"version":3,"file":"dependencyfilter.min.js","sources":["../src/dependencyfilter.js"],"sourcesContent":["/**\n * This file is part of eAbyas\n *\n * Copyright eAbyas Info Solutons Pvt Ltd, India\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @author eabyas  <info@eabyas.in>\n * @package BizLMS\n * @subpackage block_learnerscript\n */\ndefine(['block_learnerscript/select2',\n    'block_learnerscript/responsive.bootstrap',\n    'core/ajax',\n    'core/templates',\n], function(select2, DataTable,Ajax,Templates) {\n    var dependencyfilter;\n\n    return dependencyfilter = {\n        init: function(params) {\n            var reportid = $('.dependencyfilter').attr('id');\n            var name = params.name;\n            var orgtypefield = '#id_filter_'+name+'';\n            var organization = $(orgtypefield).val();\n            paramdata = {id:reportid,name:name,organization:organization};\n\n            // if(organization > 0){\n                var promise = Ajax.call([{\n                    methodname: 'block_learnerscript_dependencies',\n                    args: paramdata\n                }]);\n\n                promise[0].done(function(resp) {\n                    if(resp.name == 'course'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.courses});\n                        data.then(function(html,js){\n                            $('#id_filter_course').html(html);\n                        });\n                    }\n                    if(resp.name == 'local_classroom'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.classrooms});\n                        data.then(function(html,js){\n                            $('#id_filter_classrooms').html(html);\n                        });\n                    }\n                    if(resp.name == 'local_certification'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.certifications});\n                        data.then(function(html,js){\n                            $('#id_filter_certificates').html(html);\n                        });\n                    }\n                    if(resp.name == 'local_evaluations'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.feedbacks});\n                        data.then(function(html,js){\n                            $('#id_filter_feedbacks').html(html);\n                        });\n                    }\n                    if(resp.name == 'local_learningplan'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.learningplans});\n                        data.then(function(html,js){\n                            $('#id_filter_learningplans').html(html);\n                        });\n                    }\n                    if(resp.name == 'local_onlinetests'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.onlinetests});\n                        data.then(function(html,js){\n                            $('#id_filter_onlinetests').html(html);\n                        });\n                    }\n                    if(resp.name == 'local_program'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.programs});\n                        data.then(function(html,js){\n                            $('#id_filter_programs').html(html);\n                        });\n                    }\n                    if(name == 'organization'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.departments});\n                        data.then(function(html,js){\n                            $('#id_filter_departments').html(html);\n                        });\n                    }\n                    // if(resp.name != 'user'){\n                        var data = Templates.render('block_learnerscript/dependencyfilter', {response: resp.users});\n                        data.then(function(html,js){\n                            $('#id_filter_user').html(html);\n                        });\n                    // }\n\n\n                    \n                }).fail(function(ex) {\n                    // do something with the exception\n                    console.log(ex);\n                });\n            // }            \n        },\n        load: function(){\n\n        }\n    };\n});"],"names":["define","select2","DataTable","Ajax","Templates","init","params","reportid","$","attr","name","organization","val","paramdata","id","call","methodname","args","done","resp","render","response","courses","then","html","js","classrooms","certifications","feedbacks","learningplans","onlinetests","programs","departments","users","fail","ex","console","log","load"],"mappings":"AAsBAA,8CAAO,CAAC,8BACJ,2CACA,YACA,mBACD,SAASC,QAASC,UAAUC,KAAKC,iBAGN,CACtBC,KAAM,SAASC,YACPC,SAAWC,EAAE,qBAAqBC,KAAK,MACvCC,KAAOJ,OAAOI,KAEdC,aAAeH,EADA,cAAcE,MACEE,MACnCC,UAAY,CAACC,GAAGP,SAASG,KAAKA,KAAKC,aAAaA,cAG9BR,KAAKY,KAAK,CAAC,CACrBC,WAAY,mCACZC,KAAMJ,aAGF,GAAGK,MAAK,SAASC,MACL,UAAbA,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKG,UAC/EC,MAAK,SAASC,KAAKC,IACpBjB,EAAE,qBAAqBgB,KAAKA,SAGpB,mBAAbL,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKO,aAC/EH,MAAK,SAASC,KAAKC,IACpBjB,EAAE,yBAAyBgB,KAAKA,SAGxB,uBAAbL,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKQ,iBAC/EJ,MAAK,SAASC,KAAKC,IACpBjB,EAAE,2BAA2BgB,KAAKA,SAG1B,qBAAbL,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKS,YAC/EL,MAAK,SAASC,KAAKC,IACpBjB,EAAE,wBAAwBgB,KAAKA,SAGvB,sBAAbL,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKU,gBAC/EN,MAAK,SAASC,KAAKC,IACpBjB,EAAE,4BAA4BgB,KAAKA,SAG3B,qBAAbL,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKW,cAC/EP,MAAK,SAASC,KAAKC,IACpBjB,EAAE,0BAA0BgB,KAAKA,SAGzB,iBAAbL,KAAKT,MACON,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKY,WAC/ER,MAAK,SAASC,KAAKC,IACpBjB,EAAE,uBAAuBgB,KAAKA,SAG3B,gBAARd,MACYN,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKa,cAC/ET,MAAK,SAASC,KAAKC,IACpBjB,EAAE,0BAA0BgB,KAAKA,SAI1BpB,UAAUgB,OAAO,uCAAwC,CAACC,SAAUF,KAAKc,QAC/EV,MAAK,SAASC,KAAKC,IACpBjB,EAAE,mBAAmBgB,KAAKA,YAMnCU,MAAK,SAASC,IAEbC,QAAQC,IAAIF,QAIxBG,KAAM"}