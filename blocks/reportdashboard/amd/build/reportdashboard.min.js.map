{"version":3,"file":"reportdashboard.min.js","sources":["../src/reportdashboard.js"],"sourcesContent":["define(['core/ajax',\n        'block_learnerscript/report',\n        'block_learnerscript/reportwidget',\n        'block_learnerscript/schedule',\n        'block_learnerscript/helper',\n        'block_learnerscript/ajax',\n        'block_learnerscript/select2',\n        'block_learnerscript/jquery.dataTables',\n        'block_learnerscript/radioslider',\n        'block_learnerscript/flatpickr',\n        'core/str',\n        'jquery',\n        'jqueryui',\n        'block_learnerscript/bootstrapnotify',\n        'block_reportdashboard/inplace_editable'\n    ],\n    function(Ajax, report, reportwidget, schedule, helper, ajax, select2, DataTable,RadiosToSlider,flatpickr, Str, $) {\n        return {\n            init: function() {\n                    $(document).ajaxStop(function() {\n                         $(\".loader\").fadeOut(\"slow\");\n                    });\n                    var options = $('#compliancedashboardfilter').find(\":selected\").text();\n                    if(options == 'All') {\n                        setTimeout(function(){ \n                            $(\".select2-selection.select2-selection--multiple\").append(\"<span title='All' class='complianceselect' style='padding-left:8px'>All</span>\");\n                        }, 1000);\n                    } else {\n                        setTimeout(function(){ \n                            $(\".select2-selection.select2-selection--multiple\").append(\"<span title='Selected'  class='complianceselect' style='padding-left:8px'>Selected</span>\"); \n                        }, 1000);\n                    }\n\n                    helper.Select2Ajax({});\n                    $(\".dashboardcourses\").change(function(){\n                        var courseid = $(this).val();\n                        $(\".report_courses\").val(courseid);\n                        reportwidget.DashboardTiles();\n                        reportwidget.DashboardWidgets();\n                        $(\".viewmore\").each(function(){\n                            var ahref = $(this).attr('href');\n                        });\n                        $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                    });\n                    $(\".dashboardcompliance\").change(function(){\n                        var selected = $(this).val();\n                        if(selected.includes(\"0\")) {\n                            var data = $(\"select.dashboardcompliance option[value='0']\").attr(\"class\");\n                            if(data == 'complianceall') {\n                                var option_all = $(\"select.dashboardcompliance option:selected\").map(function () {\n                                    return $(this).text();\n                                }).get().join(',');\n                                var array = option_all.split(',');\n                                for(let i=1; i<selected.length; i++) {\n                                    $(\".dashboardcompliance option[value=\"+ selected[i] +\"]\").remove();\n                                }\n                                var selectedcompliance = $(this).val();\n                                var complianceid = selectedcompliance;\n                                for(let i=1; i<selected.length; i++) {\n                                    $(\".dashboardcompliance option\").eq(selected[i]).before($(\"<option class='optioncompliance'></option>\").val(selected[i]).text(array[i]));\n                                }\n                                $(\".complianceselect\").text(\"All\");\n                                var complianceid = 0;\n                                $(\"#compliancedashboardfilter option[value='0']\").attr(\"class\", 'selectedcompliance');\n                            } else if(data == 'selectedcompliance') {\n                                $(\".complianceselect\").text(\"Selected\");\n                               $(\"#compliancedashboardfilter option[value='0']\").remove();\n                                var selected = $(this).val();\n                                var complianceid = selected;\n                               $('.dashboardcompliance').prepend(`<option value='0' class='complianceall'>All</option>`);\n                            }\n                        } else {\n                            var complianceid = selected;\n                            $(\".complianceselect\").text(\"Selected\");\n                        }\n                        //var costcenterid = $(\".report_costcenter\").val();\n                         var costcenterid = $('.dashboardcostcenters').find(\":selected\").val();\n                        //var departmentid = $(\".report_department\").val();\n                        var departmentid = $('.dashboarddepartment').find(\":selected\").val();\n                        var subdepartmentid = $('.dashboardsubdepartment').find(\":selected\").val();\n                        if (costcenterid == '' || costcenterid == null){\n                            var costcenterid = $(\".report_costcenter\").val();\n                        }\n                        if (departmentid == '' || departmentid == null){\n                            var departmentid = $(\".report_department\").val();\n                        }\n                        if (subdepartmentid == '' || subdepartmentid == null){\n                           var subdepartmentid = $(\".report_subdepartment\").val();\n                        }\n                        $(\".report_compliance\").val(complianceid);\n                        var params = {};\n                        params.costcenter = costcenterid;\n                        params.department = departmentid;\n                        params.subdepartment = subdepartmentid;\n                        params.complianceid = JSON.stringify(complianceid);\n                        var promise = Ajax.call([{\n                            methodname: 'block_reportdashboard_complianceslist',\n                            args: params\n                        }]);\n                        promise[0].done(function(data) {\n                            $(\".compliancetabs\").html(JSON.parse(data.compliancetabs));\n                            var cid =  $('.compliance').data('complianceid');\n                            var params = {};\n                            params.complianceid = cid;\n                            params.costcenter = costcenterid;\n                            params.department = departmentid;\n                            params.subdepartment = subdepartmentid;\n                            var promise = Ajax.call([{\n                                methodname: 'block_reportdashboard_compliancedetails',\n                                args: params\n                            }]);\n                            promise[0].done(function(data) {\n                                $(\".allpercentage\").html(data.overallpercentage+ '%');\n                                $(\".compliancetracking\").html(data.tracking);\n                                $(\".section_content\").html(JSON.parse(data.sections));\n                                $(\"td a\").click(function(){\n                                    var url = $(this).attr('href');\n                                    var tableid = 'popupoverlay';\n                                    event.preventDefault();\n                                    var reportid = $(this).data('reportid');\n                                    var reporttype = 'table';\n                                    var instanceid = $(this).data('reportid');\n                                    require(['block_learnerscript/helper'], function(helper) {\n                                        helper.ReportModelFromLink({container: $(this), url: url,\n                                            dashboard:'compliance',\n                                            tableid: tableid, \n                                                            reportid: reportid,\n                                                            reporttype: reporttype,\n                                                            instanceid: instanceid\n                                        });\n                                    });\n                                });\n                            });\n                            $(\".compliance\").click(function(){\n                                var complianceid = $(this).data(\"complianceid\");\n                                var params = {};\n                                params.complianceid = complianceid;\n                                params.costcenter = costcenterid;\n                                params.department = departmentid;\n                                params.subdepartment = subdepartmentid;\n                                var promise = Ajax.call([{\n                                    methodname: 'block_reportdashboard_compliancedetails',\n                                    args: params\n                                }]);\n                                promise[0].done(function(data) {\n                                    $(\".allpercentage\").html(data.overallpercentage+ '%');\n                                    $(\".compliancetracking\").html(data.tracking);\n                                    $(\".section_content\").html(JSON.parse(data.sections));\n                                    $(\"td a\").click(function(){\n                                        var url = $(this).attr('href');\n                                        var tableid = 'popupoverlay';\n                                        event.preventDefault();\n                                        var reportid = $(this).data('reportid');\n                                        var reporttype = 'table';\n                                        var instanceid = $(this).data('reportid');\n                                        require(['block_learnerscript/helper'], function(helper) {\n                                            helper.ReportModelFromLink({container: $(this), url: url,\n                                                dashboard:'compliance',\n                                                tableid: tableid, \n                                                                reportid: reportid,\n                                                                reporttype: reporttype,\n                                                                instanceid: instanceid\n                                            });\n                                        });\n                                    });\n                                });\n                            });\n                        });\n                    });\n                    $(\"#ls_onlinecourseid\").change(function(){\n                        var onlinecourseid = $(this).val();\n                        if (onlinecourseid > 0) {\n                            $(\".report_onlinecourse\").val(onlinecourseid);\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                            $(\".viewmore\").each(function(){\n                                var ahref = $(this).attr('href');\n                            });\n                            $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                        }\n                    });\n                    $(\"#ls_labid\").change(function(){\n                        var labid = $(this).val();\n                        $(\".report_lab\").val(labid);\n                        if (labid > 0) {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                            $(\".viewmore\").each(function(){\n                                var ahref = $(this).attr('href');\n                            });\n                            $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                        }\n                    });\n                    $(\"#ls_assessmentid\").change(function(){\n                        var assessmentid = $(this).val();\n                        $(\".report_assessments\").val(assessmentid);\n                        if (assessmentid > 0) {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                            $(\".viewmore\").each(function(){\n                                var ahref = $(this).attr('href');\n                            });\n                            $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                        }\n                    });\n                    $(\"#ls_webinarid\").change(function(){\n                        var webinarid = $(this).val();\n                        $(\".report_webinars\").val(webinarid);\n                        if (webinarid > 0) {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                            $(\".viewmore\").each(function(){\n                                var ahref = $(this).attr('href');\n                            });\n                            $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                        }\n                    });\n                    $(\"#ls_classroomid\").change(function(){\n                        var classroomid = $(this).val();\n                        $(\".report_classrooms\").val(classroomid);\n                        if (classroomid > 0) {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                            $(\".viewmore\").each(function(){\n                                var ahref = $(this).attr('href');\n                            });\n                            $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                        }\n                    });\n                    $(\"#ls_learningpathid\").change(function(){\n                        var learningpathid = $(this).val();\n                        $(\".report_learningpath\").val(learningpathid);\n                        if (learningpathid > 0) {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                            $(\".viewmore\").each(function(){\n                                var ahref = $(this).attr('href');\n                            });\n                            $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                        }\n                    });\n                    $(\".dashboardcostcenters\").change(function(){\n                        var costcenterid = $(this).val();\n                        $(\".report_costcenter\").val(costcenterid);\n                        $(\".viewmore\").each(function(){\n                            var ahref = $(this).attr('href');\n                        });\n                        var args = {};\n                        args.action = 'departmentlist';\n                        args.costcenter = costcenterid;\n                        senddata = JSON.stringify(args);\n                        var promise = ajax.call({\n                            args:args,\n                            url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        });\n                        promise.done(function(response) {\n                            var template = '';\n                            $.each(response, function(key, value) {\n                                template += '<option value = ' + key + '>' + value + '</option>';\n                            });\n                            $(\"#dashboarddepartment\").html(template);\n                            $(\"#dashboarddepartment\").val($(' #dashboarddepartment option:eq(0)').val());\n                            $(\"#dashboarddepartment\").trigger('change');\n                        });\n                        $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                    });\n                    $(\".dashboarddepartment\").change(function(){\n                        var costcenterid = $(\".report_costcenter\").val();\n                        var departmentid = $(this).val();\n                        $(\".report_department\").val(departmentid);\n                        $(\".viewmore\").each(function(){\n                            var ahref = $(this).attr('href');\n                        });\n                        var args = {};\n                        args.action = 'subdepartmentlist';\n                        args.costcenter = costcenterid;\n                        args.department = departmentid;\n                        senddata = JSON.stringify(args);\n                        var promise = ajax.call({\n                            args:args,\n                            url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        });\n                        promise.done(function(response) {\n                            var template = '';\n                            $.each(response, function(key, value) {\n                                template += '<option value = ' + key + '>' + value + '</option>';\n                            });\n                            $(\"#dashboardsubdepartment\").html(template);\n                            $(\"#dashboardsubdepartment\").val($(' #dashboardsubdepartment option:eq(0)').val());\n                            $(\"#dashboardsubdepartment\").trigger('change');\n                        });\n                        // $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                    });\n                    $(\".dashboardsubdepartment\").change(function(){\n                        var costcenterid = $(\".report_costcenter\").val();\n                        var departmentid = $(\".report_department\").val();\n                        var subdepartmentid = $(this).val();\n                        $(\".report_subdepartment\").val(subdepartmentid);\n                        $(\".report_department\").val(departmentid);\n                        $(\".viewmore\").each(function(){\n                            var ahref = $(this).attr('href');\n                        });\n                        var args = {};\n                        args.action = 'l4departmentlist';\n                        args.costcenter = costcenterid;\n                        args.department = departmentid;\n                        args.subdepartment = subdepartmentid;\n                        senddata = JSON.stringify(args);\n                        var promise = ajax.call({\n                            args:args,\n                            url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        });\n                        promise.done(function(response) {\n                            var template = '';\n                            $.each(response, function(key, value) {\n                                template += '<option value = ' + key + '>' + value + '</option>';\n                            });\n                            $(\"#dashboardl4department\").html(template);\n                            $(\"#dashboardl4department\").val($('#dashboardl4department option:eq(0)').val());\n                            $(\"#dashboardl4department\").trigger('change');\n                        });\n                        $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n\n                        // var promise = Ajax.call([{\n                        //     methodname: 'block_reportdashboard_complianceslist',\n                        //     args: params\n                        // }]);\n                        // promise[0].done(function(data) {\n                        //     $(\".compliancetabs\").html(JSON.parse(data.compliancetabs));\n                        //     var cid =  $('.compliance').data('complianceid');\n                        //     var params = {};\n                        //     params.costcenter = costcenterid;\n                        //     params.department = departmentid;\n                        //     params.subdepartment = subdepartmentid;\n                        //     params.complianceid = cid;\n                        //     var promise = Ajax.call([{\n                        //         methodname: 'block_reportdashboard_compliancedetails',\n                        //         args: params\n                        //     }]);\n                        //     promise[0].done(function(data) {\n                        //         $(\".allpercentage\").html(data.overallpercentage+ '%');\n                        //         $(\".section_content\").html(JSON.parse(data.sections));\n                        //     });\n                        //     $(\".compliance\").click(function(){\n                        //         var complianceid = $(this).data(\"complianceid\");\n                        //         var params = {};\n                        //         params.costcenter = costcenterid;\n                        //         params.department = departmentid;\n                        //         params.subdepartment = subdepartmentid;\n                        //         params.complianceid = complianceid;\n                        //         var promise = Ajax.call([{\n                        //             methodname: 'block_reportdashboard_compliancedetails',\n                        //             args: params\n                        //         }]);\n                        //         promise[0].done(function(data) {\n                        //             $(\".allpercentage\").html(data.overallpercentage+ '%');\n                        //             $(\".section_content\").html(JSON.parse(data.sections));\n                        //             $(\"td a\").click(function(){\n                        //                 var url = $(this).attr('href');\n                        //                 var tableid = 'popupoverlay';\n                        //                 event.preventDefault();\n                        //                 var reportid = $(this).data('reportid');\n                        //                 var reporttype = 'table';\n                        //                 var instanceid = $(this).data('reportid');\n                        //                 require(['block_learnerscript/helper'], function(helper) {\n                        //                     helper.ReportModelFromLink({container: $(this), url: url,\n                        //                         dashboard:'compliance',\n                        //                         tableid: tableid,\n                        //                         reportid: reportid,\n                        //                         reporttype: reporttype,\n                        //                         instanceid: instanceid\n                        //                     });\n                        //                 });\n                        //             });\n                        //         });\n                        //     });\n                        // });\n                        // reportwidget.DashboardTiles();\n                        // reportwidget.DashboardWidgets();\n\n                        // var args = {};\n                        // args.action = 'departmentcourses';\n                        // args.department = departmentid;\n                        // args.costcenter = costcenterid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     $.each(response, function(key, value) {\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     $(\"#coursedashboardfilter\").html(template);\n                        //     $(\"#coursedashboardfilter\").val($(' #coursedashboardfilter option:eq(0)').val());\n                        //     $(\"#coursedashboardfilter\").trigger('change');\n                        // });\n                        // var args = {};\n                        // args.action = 'departmentcompliances';\n                        // args.department = departmentid;\n                        // args.costcenter = costcenterid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     $.each(response, function(key, value) {\n                        //         if(value == 'ALL') {\n                        //             template += '<option value = ' + key + ' class=\"complianceall\">' + value + '</option>';\n                        //         } else {\n                        //             template += '<option value = ' + key + ' class=\"optioncompliance\">' + value + '</option>';\n                        //         }\n                        //     });\n                        //     $(\"#compliancedashboardfilter\").html(template);\n                        //     $(\"#compliancedashboardfilter\").val($(' #compliancedashboardfilter option:eq(0)').val());\n                        //     $(\"#compliancedashboardfilter\").trigger('change');\n                        // });\n                        // var args = {};\n                        // args.action = 'onlinecourselist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-onlinecourses, .region-onlinecourses-filter').hide();\n                        //     } else {\n                        //         $('.region-onlinecourses, .region-onlinecourses-filter').show();\n                        //     }\n                        //     $(\"#ls_onlinecourseid\").html(template);\n                        //     $(\"#ls_onlinecourseid\").val($(' #ls_onlinecourseid option:eq(0)').val());\n                        //     $(\"#ls_onlinecourseid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_onlinecourses\").html(template);\n                        //             $(\"#id_filter_onlinecourses\").val($(' #id_filter_onlinecourses option:eq(0)').val());\n                        //             $(\"#id_filter_onlinecourses\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // var args = {};\n                        // args.action = 'lablist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-labs, .region-labs-filter').hide();\n                        //     } else {\n                        //         $('.region-labs, .region-labs-filter').show();\n                        //     }\n                        //     $(\"#ls_labid\").html(template);\n                        //     $(\"#ls_labid\").val($(' #ls_labid option:eq(0)').val());\n                        //     $(\"#ls_labid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_labs\").html(template);\n                        //             $(\"#id_filter_labs\").val($(' #id_filter_labs option:eq(0)').val());\n                        //             $(\"#id_filter_labs\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // var args = {};\n                        // args.action = 'assessmentlist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-assessments, .region-assessments-filter').hide();\n                        //     } else {\n                        //         $('.region-assessments, .region-assessments-filter').show();\n                        //     }\n                        //     $(\"#ls_assessmentid\").html(template);\n                        //     $(\"#ls_assessmentid\").val($(' #ls_assessmentid option:eq(0)').val());\n                        //     $(\"#ls_assessmentid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_assessments\").html(template);\n                        //             $(\"#id_filter_assessments\").val($('#id_filter_assessments option:eq(0)').val());\n                        //             $(\"#id_filter_assessments\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // var args = {};\n                        // args.action = 'webinarlist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-webinars, .region-webinars-filter').hide();\n                        //     } else {\n                        //         $('.region-webinars, .region-webinars-filter').show();\n                        //     }\n\n                        //     $(\"#ls_webinarid\").html(template);\n                        //     $(\"#ls_webinarid\").val($(' #ls_webinarid option:eq(0)').val());\n                        //     $(\"#ls_webinarid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_webinars\").html(template);\n                        //             $(\"#id_filter_webinars\").val($(' #id_filter_webinars option:eq(0)').val());\n                        //             $(\"#id_filter_webinars\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // var args = {};\n                        // args.action = 'classroomlist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-classroom, .region-classroom-filter').hide();\n                        //     } else {\n                        //         $('.region-classroom, .region-classroom-filter').show();\n                        //     }\n                        //     $(\"#ls_classroomid\").html(template);\n                        //     $(\"#ls_classroomid\").val($(' #ls_classroomid option:eq(0)').val());\n                        //     $(\"#ls_classroomid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_classrooms\").html(template);\n                        //             $(\"#id_filter_classrooms\").val($(' #id_filter_classrooms option:eq(0)').val());\n                        //             $(\"#id_filter_classrooms\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // var args = {};\n                        // args.action = 'programlist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-program, .region-program-filter').hide();\n                        //     } else {\n                        //         $('.region-program, .region-program-filter').show();\n                        //     }\n                        //     $(\"#ls_programid\").html(template);\n                        //     $(\"#ls_programid\").val($(' #ls_programid option:eq(0)').val());\n                        //     $(\"#ls_programid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_programs\").html(template);\n                        //             $(\"#id_filter_programs\").val($(' #id_filter_programs option:eq(0)').val());\n                        //             $(\"#id_filter_programs\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // var args = {};\n                        // args.action = 'learningpathlist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     let i = 0;\n                        //     $.each(response, function(key, value) {\n                        //         i++;\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     if (i < 2) {\n                        //         $('.region-learningpath, .region-learningpath-filter').hide();\n                        //     } else {\n                        //         $('.region-learningpath, .region-learningpath-filter').show();\n                        //     }\n                        //     $(\"#ls_learningpathid\").html(template);\n                        //     $(\"#ls_learningpathid\").val($(' #ls_learningpathid option:eq(0)').val());\n                        //     $(\"#ls_learningpathid\").trigger('change');\n                        //     $(\".report_schedule.dropdown-item\").click(function(){\n                        //     setTimeout(myFunction, 100);\n                        //         function myFunction() {\n                        //             $(\"#id_filter_learningpath\").html(template);\n                        //             $(\"#id_filter_learningpath\").val($(' #id_filter_learningpath option:eq(0)').val());\n                        //             $(\"#id_filter_learningpath\").trigger('change');\n                        //         }\n                        //     });\n                        // });\n                        // $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n                    });\n                    $(\".dashboardl4department\").change(function(){\n                        // var costcenterid = $(\".report_costcenter\").val();\n                        // var departmentid = $(\".report_department\").val();\n                        // var subdepartmentid = $('.report_subdepartment').val();\n                        // var l4departmentid = $(this).val();\n                        // $(\".report_subdepartment\").val(subdepartmentid);\n                        // $(\".report_department\").val(departmentid);\n                        // $(\".viewmore\").each(function(){\n                        //     var ahref = $(this).attr('href');\n                        // });\n                        // var args = {};\n                        // args.action = 'l5departmentlist';\n                        // args.costcenter = costcenterid;\n                        // args.department = departmentid;\n                        // args.subdepartment = subdepartmentid;\n                        // args.l4department = l4departmentid;\n                        // senddata = JSON.stringify(args);\n                        // var promise = ajax.call({\n                        //     args:args,\n                        //     url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        // });\n                        // promise.done(function(response) {\n                        //     var template = '';\n                        //     $.each(response, function(key, value) {\n                        //         template += '<option value = ' + key + '>' + value + '</option>';\n                        //     });\n                        //     $(\"#dashboardl5department\").html(template);\n                        //     $(\"#dashboardl5department\").val($('#dashboardl4department option:eq(0)').val());\n                        //     $(\"#dashboardl5department\").trigger('change');\n                        // });\n                        reportwidget.DashboardTiles();\n                        reportwidget.DashboardWidgets();\n                        // $('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\n\n                    });\n                  /*   $(\"#dashboardl5department\").change(function(){\n                        reportwidget.DashboardTiles();\n                        reportwidget.DashboardWidgets();\n                    }) */\n\n\n                    $( \"#createdashbaord_form\" ).submit(function( event ) {\n                        var dashboardname = $( \"#id_dashboard\" ).val();\n                        var name = dashboardname.trim();\n                        if(name == '' || name == null){\n                            $( \"#id_error_dashboard\" ).css('display', 'block');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\n                            event.preventDefault();\n                        }\n                        spaceexist = name.indexOf(\" \");\n                        if(spaceexist > 0 && spaceexist != ''){\n                            $( \"#id_error_dashboard\" ).css('display', 'none');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'block');\n                            event.preventDefault();\n                        }\n                    });\n\n\n                $.ui.dialog.prototype._focusTabbable = $.noop;\n                var DheaderPosition = $(\"#dashboard-header\").position();\n                $(\".sidenav\").offset({top: 0});\n                $(\"#internalbsm\").offset({top: DheaderPosition.top});\n                /**\n                * Select2 Options\n                */\n                $(\"select[data-select2='1']\").select2();\n                helper.Select2Ajax({\n                    action: 'reportlist',\n                    multiple: true\n                });\n               /**\n                * Filter area\n                */\n                $(document).on('click',\".filterform #id_filter_clear\",function(e) {\n                    $(this).parents('.mform').trigger(\"reset\");\n                    var activityelement = $(this).parents('.mform').find('#id_filter_activities');\n                    var instancelement = $(this).parents('.block_reportdashboard').find('.report_dashboard_container');\n                    var reportid = instancelement.data('reportid');\n                    var reporttype = instancelement.data('reporttype');\n                    var instanceid = instancelement.data('blockinstance');\n                    var userelement = $(this).parents('.mform').find('#id_filter_users');\n                    // reportjs.UserCourses({ userid: 0, reporttype: args.reporttype ,element: activityelement});\n                    // smartfilter.EnrolledUsers({ courseid: 0, element: activityelement});\n                    smartfilter.CourseActivities({ courseid: 0,element: activityelement });\n                    // $(\".filterform select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\n                    $(\".filterform select[data-select2-ajax='1']\").val('0').trigger('change');\n                    $('.filterform')[0].reset();\n                    $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\n                    // $(\"select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\n                    reportwidget.CreateDashboardwidget({reportid: reportid, reporttype: reporttype, instanceid: instanceid});\n                    // $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\n                });\n                $(document).on('change', \"select[name='filter_coursecategories']\", function(){\n                    var categoryid = this.value;\n                    var courseelement = $(this).closest('.mform').find('#id_filter_courses');\n                    if(courseelement.length != 0){\n                        smartfilter.categoryCourses({ categoryid: categoryid ,element: courseelement});\n                    }\n                });\n                $(document).on('change', \"select[name='filter_courses']\", function(){\n                    var courseid = this.value;\n                    var activityelement = $(this).closest('.mform').find('#id_filter_activities');\n                    var userelement = $(this).closest('.mform').find('#id_filter_users');\n                    if(activityelement.length != 0){\n                        smartfilter.CourseActivities({ courseid: courseid ,element: activityelement});\n                    }\n                });\n\n                /**\n                * Duration buttons\n                */\n                RadiosToSlider.init($('#segmented-button'), {\n                    size: 'medium',\n                    animation: true,\n                    reportdashboard: true\n                });\n                /**\n                * Duration Filter\n                */\n                flatpickr('#customrange',{\n                    mode: 'range',\n                    onOpen: function(selectedDates, dateStr,instance){\n                        instance.clear();\n                    },\n                    onClose: function(selectedDates, dateStr, instance) {\n                        $('#ls_fstartdate').val(selectedDates[0].getTime() / 1000);\n                        $('#ls_fenddate').val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\n                        require(['block_learnerscript/reportwidget'], function(reportjs) {\n                            reportwidget.DashboardTiles();\n                            reportwidget.DashboardWidgets();\n                        });\n                    }\n                });\n                /**\n                 * Escape dropdown on click of window\n                 */\n                window.onclick = function(event) {\n                    if (!event.target.matches('.dropbtn')) {\n                        var dropdowns = document.getElementsByClassName(\"dropdown-content\");\n                        var i;\n                        for (i = 0; i < dropdowns.length; i++) {\n                            var openDropdown = dropdowns[i];\n                            if ($(openDropdown).hasClass('show')) {\n                                $(openDropdown).toggleClass('show');\n                            }\n                        }\n                    }\n                }\n            },\n            /**\n             * Add reports as blocks to dashboard\n             * @return {[type]} [description]\n             */\n            addblocks_to_dashboard: function() {\n                Str.get_string('addblockstodashboard','block_reportdashboard'\n                ).then(function(s) {\n                    if($('.reportslist').html().length > 0){\n                        console.log(\"here\");\n                         $('.reportslist').dialog();\n                    } else{\n\n                    $.urlParam = function(name){\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ' ){\n                       return null;\n                    } else{\n                       return results[1] || 0;\n                    }\n                }\n                var role=$.urlParam('role');\n                var dashboardurl=$.urlParam('dashboardurl');\n                var promise = Ajax.call([{\n                    methodname: 'block_reportdashboard_addwidget_to_dashboard',\n                    args: {\n                        role: role,\n                        dashboardurl: dashboardurl,\n                    },\n                }]);\n                promise[0].done(function(response) {\n                    var widget_title_img = \"<img class='dialog_title_icon' alt='Add Widgets' src='\" +\n                        M.util.image_url(\"add_widgets_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.reportslist').dialog({\n                        title: 'Add widgets to dashboard',\n                        modal: true,\n                        minWidth: 700,\n                        maxHeight: 600\n                    });\n                    $('.reportslist').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                    $('.reportslist').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(widget_title_img + 'Add widgets to dashboard');\n                     resp = JSON.parse(response);\n                     console.log(resp);\n                    $('.reportslist').html(resp);\n                }).fail(function(ex) {\n                    // do something with the exception\n                     console.log('Add Tiles');\n                });\n            }\n                });\n            },\n            addtiles_to_dashboard: function() {\n                Str.get_string('addtilestodashboard','block_reportdashboard'\n                ).then(function(s) {\n                    if($('.statistics_reportslist').html().length > 0) {\n                        $('.statistics_reportslist').dialog();\n                    } else {\n                     $.urlParam = function(name){\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ' ){\n                       return null;\n                    } else{\n                       return results[1] || 0;\n                    }\n                }\n\n                var role=$.urlParam('role');\n                var dashboardurl=$.urlParam('dashboardurl');\n                var promise = Ajax.call([{\n                    methodname: 'block_reportdashboard_addtiles_to_dashboard',\n                     args: {\n                        role: role,\n                        dashboardurl: dashboardurl,\n                    },\n                }]);\n                 promise[0].done(function(response) {\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add Tiles' src='\" +\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.statistics_reportslist').dialog({\n                        title: 'Add tiles to dashboard',\n                        modal: true,\n                        minWidth: 600,\n                        maxHeight: 600\n                    });\n                    $('.statistics_reportslist').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                    $('.statistics_reportslist').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(tile_title_img + 'Add tiles to dashboard');\n                    resp = JSON.parse(response);\n                    $('.statistics_reportslist').html(resp);\n                    }).fail(function(ex) {\n                    // do something with the exception\n                     console.log('Add Tiles');\n                });\n                }\n                });\n            },\n            getcompliance: function(arg) {\n                var costcenterid = $(\".report_costcenter\").val();\n                var departmentid = $(\".report_department\").val();\n                var subdepartmentid = $('.report_subdepartment').find(\":selected\").val();\n                var params = {};\n                params.complianceid = arg;\n                params.costcenter = costcenterid;\n                params.department = departmentid;\n                params.subdepartment = subdepartmentid;\n                var promise = Ajax.call([{\n                    methodname: 'block_reportdashboard_compliancedetails',\n                    args: params\n                }]);\n                promise[0].done(function(data) {\n                    $(\".allpercentage\").html(data.overallpercentage+ '%');\n                    $(\".compliancetracking\").html(data.tracking);\n                    $(\".section_content\").html(JSON.parse(data.sections));\n                    $(\"td a\").click(function(){\n                        var url = $(this).attr('href');\n                        var tableid = 'popupoverlay';\n                        event.preventDefault();\n                        var reportid = $(this).data('reportid');\n                        var reporttype = 'table';\n                        var instanceid = $(this).data('reportid');\n                        require(['block_learnerscript/helper'], function(helper) {\n                            helper.ReportModelFromLink({container: $(this), url: url,\n                                dashboard:'compliance',\n                                tableid: tableid, \n                                                reportid: reportid,\n                                                reporttype: reporttype,\n                                                instanceid: instanceid\n                            });\n                        });\n                    });\n                });\n            },\n            addnewdashboard: function() {\n                Str.get_string('addnewdashboard','block_reportdashboard'\n                ).then(function(s) {\n                    document.getElementById(\"id_dashboard\").value = '';\n                    $(\"#id_error_dashboard\").css('display', 'none');\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add new dashboard' src='\" +\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.newreport_dashboard').dialog({\n                        title: s,\n                        modal: true,\n                        minWidth: 450,\n                        maxHeight: 600\n                    });\n                    $('.newreport_dashboard').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                        var Closebutton = $('.ui-icon-closethick').parent();\n                        $(Closebutton).attr({\n                            \"title\" : \"Close\"\n                        });\n                    $('.newreport_dashboard').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(tile_title_img + s);\n                });\n            },\n            updatedashboard: function(oldname,role){\n                Str.get_string('updatedashboard','block_reportdashboard'\n                ).then(function(s) {\n                    $( \"#id_error_dashboard\" ).css('display', 'none');\n                    $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add new dashboard' src='\" +\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\n                    $('.newreport_dashboard').dialog({\n                        title: s,\n                        modal: true,\n                        minWidth: 450,\n                        maxHeight: 600\n                    });\n                    $('.newreport_dashboard').closest(\".ui-dialog\")\n                        .find(\".ui-dialog-titlebar-close\")\n                        .removeClass(\"ui-dialog-titlebar-close\")\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                        var Closebutton = $('.ui-icon-closethick').parent();\n                        $(Closebutton).attr({\n                            \"title\" : \"Close\"\n                        });\n                    $('.newreport_dashboard').closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(tile_title_img + s);\n                    document.getElementById(\"id_dashboard\").value = oldname;\n                    $(\"#createdashbaord_form\").submit(function(event){\n\n                        var dashboardname = $( \"#id_dashboard\" ).val();\n                        var name = dashboardname.trim();\n                        if (name == '' || name == null) {\n                            $( \"#id_error_dashboard\" ).css('display', 'block');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\n                            event.preventDefault();\n                            return false;\n                        }\n                        spaceexist = name.indexOf(\" \");\n                        if (spaceexist > 0 && spaceexist != '') {\n                            $( \"#id_error_dashboard\" ).css('display', 'none');\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'block');\n                            event.preventDefault();\n                            return false;\n                        }\n\n                        var args = {};\n                        args.action = 'updatedashboard';\n                        args.role = role;\n                        args.oldname = oldname;\n                        args.newname = document.getElementById(\"id_dashboard\").value ;\n                        senddata = JSON.stringify(args);\n                        var promise = ajax.call({\n                            args:args,\n                            url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\n                        });\n                    });\n                });\n            },\n            sendreportemail: function(args) {\n                Str.get_strings([{\n                    key: 'sendemail',\n                    component: 'block_reportdashboard'\n                }]).then(function(s) {\n                    var url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\n                    args.nodeContent = 'sendreportemail' + args.instanceid;\n                    args.action = 'sendreportemail';\n                    args.title = s;\n                    AjaxForms = require('block_learnerscript/ajaxforms');\n                    AjaxForms.init(args, url);\n                });\n            },\n            reportfilter: function(args) {\n                var self = this;\n                if ($('.report_filter_' + args.instanceid).length < 1) {\n                    var promise = Ajax.call([{\n                        methodname: 'block_learnerscript_reportfilter',\n                        args: {\n                            action: 'reportfilter',\n                            reportid: args.reportid,\n                            instance: args.instanceid\n                        }\n                    }]);\n                    promise[0].done(function(resp) {\n                        $('body').append(\"<div class='report_filter_\" + args.instanceid + \"' style='display:none;'>\" + resp + \"</div>\");\n                        $(\"select[data-action='tagfilters']\").select2();\n                        $(\"select[data-select2-ajax='1']\").each(function() {\n                            if (!$(this).hasClass('select2-hidden-accessible')) {\n                                helper.Select2Ajax({});\n                            }\n                        });\n                        self.reportFilterFormModal(args);\n                         $('.filterform'+args.instanceid+' .fitemtitle').hide();\n                          $('.filterform'+args.instanceid+' .felement').attr('style','margin:0');\n                    });\n                } else {\n                    self.reportFilterFormModal(args);\n                }\n            },\n            reportFilterFormModal: function (args) {\n                Str.get_string('reportfilters','block_reportdashboard'\n                ).then(function(s) {\n                    var title_img = \"<img class='dialog_title_icon' alt='Filter' src='\" +\n                        M.util.image_url(\"reportfilter\", \"block_reportdashboard\") + \"'/>\";\n                    $(\".report_filter_\" + args.instanceid).dialog({\n                        title: s,\n                        dialogClass: 'reportfilter-popup',\n                        modal: true,\n                        resizable: true,\n                        autoOpen: true,\n                        draggable: false,\n                        width: 517,\n                        height: 'auto',\n                        appendTo: \"#inst\" + args.instanceid,\n                        position: {\n                            my: \"center\",\n                            at: \"center\",\n                            of: \"#inst\" + args.instanceid,\n                            within: \"#inst\" + args.instanceid\n                        },\n                        open: function(event, ui) {\n                        $(this).closest(\".ui-dialog\")\n                            .find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\" : \"Close\"\n                            });\n\n                        $(this).closest(\".ui-dialog\")\n                            .find('.ui-dialog-title').html(title_img + s);\n\n                        /* Submit button */\n                        $(\".report_filter_\" + args.instanceid + \" form  #id_filter_apply\").click(function(e) {\n                            e.preventDefault();\n                            e.stopImmediatePropagation();\n                            if ($(\"#reportcontainer\" + args.instanceid).html().length > 0 ) {\n                                args.reporttype = $(\"#reportcontainer\" + args.instanceid).data('reporttype');\n                            } else {\n                                args.reporttype = $(\"#plotreportcontainer\" + args.instanceid).data('reporttype');\n                            }\n                            var reportfilter = $(\".filterform\" + args.instanceid).serializeArray();\n                            args.container = '#reporttype_' + args.reportid;\n\n                            require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                                reportwidget.CreateDashboardwidget({reportid: args.reportid,\n                                                             reporttype: args.reporttype,\n                                                             instanceid: args.instanceid});\n                                $(\".report_filter_\" + args.instanceid).dialog('close');\n                            });\n                            $(\".report_filter_\" + args.instanceid + \" form #id_filter_clear\").removeAttr('disabled');\n                        });\n                    }\n                });\n                $(\".report_filter_\" + args.instanceid + \" form #id_filter_clear\").click(function(e) {\n                    e.preventDefault();\n                    $(\".filterform\" + args.reportid).trigger(\"reset\");\n                    require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                        reportwidget.DashboardWidgets(args);\n                        $(\".report_filter_\" + args.instanceid).dialog('close');\n                    });\n                    $(\".report_filter_\" + args.instanceid).dialog('close');\n                });\n            });\n            },\n            DeleteWidget: function(args) {\n                Str.get_string('deletewidget','block_reportdashboard'\n                ).then(function(s) {\n                    var trainers = $(\"#delete_dialog\" + args.instanceid).dialog({\n                        resizable: true,\n                        autoOpen: true,\n                        width: 460,\n                        height: 210,\n                        title: s,\n                        modal: true,\n                        // dialogClass: 'dialog_fixed',\n                        appendTo: \"#inst\" + args.instanceid,\n                        position: {\n                            my: \"center\",\n                            at: \"center\",\n                            of: \"#inst\" + args.instanceid,\n                            within: \"#inst\" + args.instanceid\n                        },\n                        open: function(event, ui) {\n                            $(this).closest(\".ui-dialog\")\n                                .find(\".ui-dialog-titlebar-close\")\n                                .removeClass(\"ui-dialog-titlebar-close\")\n                                .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                                var Closebutton = $('.ui-icon-closethick').parent();\n                                $(Closebutton).attr({\n                                    \"title\" : \"Close\"\n                                });\n                        }\n                    });\n                });\n            },\n            Deletedashboard: function(args) {\n                Str.get_string('deletedashboard','block_reportdashboard'\n                ).then(function(s) {\n                    var instancename = args.instance;\n                        $( \"#dashboard_delete_popup_\"+args.random).dialog({\n                            resizable: false,\n                            height: 150,\n                            width: 375,\n                            modal: true,\n                            title : s,\n                            open: function(event) {\n                            $(this).closest(\".ui-dialog\")\n                                .find(\".ui-dialog-titlebar-close\")\n                                .removeClass(\"ui-dialog-titlebar-close\")\n                                .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                                var Closebutton = $('.ui-icon-closethick').parent();\n                                $(Closebutton).attr({\n                                    \"title\" : \"Close\"\n                                });\n                            },\n                            close: function(event, ui) {\n                                $(this).dialog('destroy').hide();\n                            }\n                        });\n                });\n            },\n            /**\n             * Schedule report form in popup in dashboard\n             * @param  object args reportid\n             * @return Popup with schedule form\n             */\n            schreportform: function(args) {\n                var self = this;\n                Str.get_string('schedulereport','block_reportdashboard'\n                ).then(function(s) {\n                    var url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\n                    args.title = s;\n                    args.nodeContent = 'schreportform' + args.instanceid;\n                    args.action = 'schreportform';\n                    AjaxForms = require('block_learnerscript/ajaxforms');\n                    AjaxForms.init(args, url);\n                });\n            }\n        };\n    });\n"],"names":["define","Ajax","report","reportwidget","schedule","helper","ajax","select2","DataTable","RadiosToSlider","flatpickr","Str","$","init","document","ajaxStop","fadeOut","find","text","setTimeout","append","Select2Ajax","change","courseid","this","val","DashboardTiles","DashboardWidgets","each","attr","html","selected","includes","data","array","map","get","join","split","i","length","remove","complianceid","eq","before","prepend","costcenterid","departmentid","subdepartmentid","params","costcenter","department","subdepartment","JSON","stringify","call","methodname","args","done","parse","compliancetabs","cid","overallpercentage","tracking","sections","click","url","event","preventDefault","reportid","instanceid","require","ReportModelFromLink","container","dashboard","tableid","reporttype","onlinecourseid","labid","assessmentid","webinarid","classroomid","learningpathid","senddata","M","cfg","wwwroot","response","template","key","value","trigger","submit","name","trim","css","spaceexist","indexOf","ui","dialog","prototype","_focusTabbable","noop","DheaderPosition","position","offset","top","action","multiple","on","e","parents","activityelement","instancelement","smartfilter","CourseActivities","element","reset","CreateDashboardwidget","categoryid","courseelement","closest","categoryCourses","size","animation","reportdashboard","mode","onOpen","selectedDates","dateStr","instance","clear","onClose","getTime","reportjs","window","onclick","target","matches","dropdowns","getElementsByClassName","openDropdown","hasClass","toggleClass","addblocks_to_dashboard","get_string","then","s","console","log","urlParam","results","RegExp","exec","location","href","role","dashboardurl","widget_title_img","util","image_url","title","modal","minWidth","maxHeight","removeClass","resp","fail","ex","addtiles_to_dashboard","tile_title_img","getcompliance","arg","addnewdashboard","getElementById","Closebutton","parent","updatedashboard","oldname","newname","sendreportemail","get_strings","component","nodeContent","AjaxForms","reportfilter","self","reportFilterFormModal","hide","title_img","dialogClass","resizable","autoOpen","draggable","width","height","appendTo","my","at","of","within","open","stopImmediatePropagation","serializeArray","removeAttr","DeleteWidget","Deletedashboard","random","close","schreportform"],"mappings":"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"}